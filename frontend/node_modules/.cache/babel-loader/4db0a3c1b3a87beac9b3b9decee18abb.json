{"ast":null,"code":"import _regeneratorRuntime from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Avatar,Card,Input,Button,Space,Divider,message}from\"antd\";import{CheckOutlined,EditOutlined}from\"@ant-design/icons\";import{showBackendMessage}from\"../util/Functions\";import EventBus from\"../util/EventBus\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MinProfile=function MinProfile(){message.config({rtl:false});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),headline=_useState4[0],setHeadline=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),avatar=_useState6[0],setAvatar=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),displayedName=_useState8[0],setDisplayedName=_useState8[1];var load=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:4000/profile\",{method:\"GET\",credentials:\"include\"}).then(function(res){if(res.ok){showBackendMessage();return res.json();}else{throw res.statusText;}}).then(function(res){setHeadline(res.headline);setAvatar(res.avatar);setDisplayedName(res.displayedName);}).catch(function(err){return message.error(err,1);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function load(){return _ref.apply(this,arguments);};}();useEffect(function(){return load();},[]);var onClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!editing){_context2.next=6;break;}setEditing(false);_context2.next=4;return fetch(\"http://localhost:4000/headline\",{method:\"PUT\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({headline:headline})}).then(function(res){if(res.ok){showBackendMessage();return res.json();}else{throw res.statusText;}}).then(function(){return EventBus.dispatchEvent(\"reload_profile\");}).catch(function(err){return message.error(err,1);});case 4:_context2.next=7;break;case 6:setEditing(true);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function onClick(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Card,{bordered:true,children:[/*#__PURE__*/_jsx(Divider,{orientation:\"left\",children:\"Me\"}),/*#__PURE__*/_jsx(Card.Meta,{avatar:/*#__PURE__*/_jsx(Avatar,{src:avatar}),title:displayedName,description:/*#__PURE__*/_jsxs(Space,{size:0,children:[/*#__PURE__*/_jsxs(Button,{type:\"text\",onClick:onClick,children:[\" \",editing?/*#__PURE__*/_jsx(CheckOutlined,{}):/*#__PURE__*/_jsx(EditOutlined,{})]}),\" \",editing?/*#__PURE__*/_jsx(Input,{value:headline,onChange:function onChange(e){setHeadline(e.target.value);}}):/*#__PURE__*/_jsx(\"span\",{children:headline})]})})]});};export default MinProfile;","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/final-frontend-WillWang1998/src/component/MinProfile.js"],"names":["React","useEffect","useState","Avatar","Card","Input","Button","Space","Divider","message","CheckOutlined","EditOutlined","showBackendMessage","EventBus","MinProfile","config","rtl","editing","setEditing","headline","setHeadline","avatar","setAvatar","displayedName","setDisplayedName","load","fetch","method","credentials","then","res","ok","json","statusText","catch","err","error","onClick","values","headers","body","JSON","stringify","dispatchEvent","e","target","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {Avatar, Card, Input, Button, Space, Divider, message} from \"antd\";\nimport {CheckOutlined, EditOutlined} from \"@ant-design/icons\";\nimport {showBackendMessage} from \"../util/Functions\";\nimport EventBus from \"../util/EventBus\";\n\nconst MinProfile = () => {\n    message.config({\n        rtl: false,\n    });\n    const [editing, setEditing] = useState(false);\n    const [headline, setHeadline] = useState(\"\");\n    const [avatar, setAvatar] = useState(\"\");\n    const [displayedName, setDisplayedName] = useState(\"\");\n\n    const load = async () => {\n        await fetch(\"http://localhost:4000/profile\", {\n            method: \"GET\",\n            credentials: \"include\",\n        }).then(res => {\n            if (res.ok) {\n                showBackendMessage();\n                return res.json();\n            } else {\n                throw res.statusText;\n            }\n        }).then(res => {\n            setHeadline(res.headline);\n            setAvatar(res.avatar);\n            setDisplayedName(res.displayedName);\n        }).catch(err => message.error(err, 1));\n    };\n\n    useEffect(() => load(), []);\n\n    const onClick = async (values) => {\n        if (editing) {\n            setEditing(false);\n            await fetch(\"http://localhost:4000/headline\", {\n                method: \"PUT\",\n                credentials: \"include\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({\n                    headline: headline,\n                }),\n            }).then(res => {\n                if (res.ok) {\n                    showBackendMessage();\n                    return res.json();\n                } else {\n                    throw res.statusText;\n                }\n            }).then(() => EventBus.dispatchEvent(\"reload_profile\"))\n                .catch(err => message.error(err, 1));\n        } else {\n            setEditing(true);\n        }\n    }\n\n    return (\n        <Card bordered={true}>\n            <Divider orientation=\"left\">Me</Divider>\n            <Card.Meta\n                avatar={<Avatar src={avatar}/>}\n                title={displayedName}\n                description={\n                    <Space size={0}>\n                        <Button type=\"text\" onClick={onClick}> {\n                            editing ? <CheckOutlined/> : <EditOutlined/>\n                        }\n                        </Button> {\n                            editing ? <Input value={headline} onChange={(e) => {\n                                setHeadline(e.target.value);\n                            }}/> :\n                            <span>{headline}</span>}\n                    </Space>\n                }\n            />\n        </Card>\n    )\n}\n\nexport default MinProfile;\n"]},"metadata":{},"sourceType":"module"}
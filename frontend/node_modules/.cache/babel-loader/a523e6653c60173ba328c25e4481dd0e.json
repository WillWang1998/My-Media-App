{"ast":null,"code":"var _jsxFileName = \"/Users/willwang98/Rice Homework/final-frontend-willwang1998-copy/src/component/SubmitOrEditArticle.js\",\n    _s = $RefreshSig$();\n\nimport React, { memo, useEffect, useState } from \"react\";\nimport { Input, Button, Form, Card, Divider, message } from \"antd\";\nimport { showBackendMessage, stringArrayEqual } from \"../util/Functions\";\nimport ImagesWall from \"./ImageWall\"; // TODO: React.lazy\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SubmitOrEditArticle = props => {\n  _s();\n\n  message.config({\n    rtl: false\n  });\n  const [form] = Form.useForm();\n  const [imageUrlsList, setImageUrlsList] = useState(props.imageUrlsList);\n  useEffect(() => {\n    form.setFieldsValue({\n      \"title\": props.title,\n      \"text\": props.text\n    });\n  }, [form, props]);\n\n  const onFinish = async values => {\n    if (props.id) {\n      await fetch(\"http://localhost:4000/article/\" + props.id, {\n        method: \"PUT\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          title: values.title,\n          text: values.text,\n          images: imageUrlsList\n        })\n      }).then(res => {\n        if (res.ok) {\n          showBackendMessage().then();\n          return res.json();\n        } else {\n          throw res.statusText;\n        }\n      }).then(res => {\n        message.success(\"Edit Successfully\");\n        props.action({\n          id: res._id,\n          title: res.title,\n          text: res.text,\n          timestamp: res.timestamp,\n          images: res.images\n        });\n      }).catch(err => message.error(err, 1));\n    } else {\n      await fetch(\"http://localhost:4000/article\", {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          title: values.title,\n          text: values.text,\n          images: imageUrlsList\n        })\n      }).then(res => {\n        if (res.ok) {\n          showBackendMessage().then();\n          return res.json();\n        } else {\n          throw res.statusText;\n        }\n      }).then(res => {\n        message.success(\"Submit Successfully\", 1);\n        console.log(\"res._id\", res._id);\n        props.action(res._id);\n      }).catch(err => message.error(err, 1));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    bordered: true,\n    children: [/*#__PURE__*/_jsxDEV(Divider, {\n      orientation: \"left\",\n      children: props.id ? \"Edit this article\" : \"Add new article\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onFinish: onFinish,\n      form: form,\n      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"title\",\n        children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"text\",\n        children: /*#__PURE__*/_jsxDEV(Input.TextArea, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        children: /*#__PURE__*/_jsxDEV(ImagesWall, {\n          imageUrlsList: imageUrlsList,\n          action: newImageUrlsList => setImageUrlsList(newImageUrlsList)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            width: \"50%\"\n          },\n          htmlType: \"submit\",\n          type: \"primary\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            width: \"50%\"\n          },\n          htmlType: \"reset\",\n          type: \"default\",\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SubmitOrEditArticle, \"ffEJD2pppWBCWCvT/d/ktUzLH+I=\", false, function () {\n  return [Form.useForm];\n});\n\n_c = SubmitOrEditArticle;\n\nconst areEqualSubmitOrEditArticle = (prevProps, nextProps) => {\n  return prevProps.id === nextProps.id && prevProps.title === nextProps.title && prevProps.text === nextProps.text && stringArrayEqual(prevProps.imageUrlsList, nextProps.imageUrlsList);\n};\n\nexport default _c2 = /*#__PURE__*/memo(SubmitOrEditArticle, areEqualSubmitOrEditArticle);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SubmitOrEditArticle\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/final-frontend-willwang1998-copy/src/component/SubmitOrEditArticle.js"],"names":["React","memo","useEffect","useState","Input","Button","Form","Card","Divider","message","showBackendMessage","stringArrayEqual","ImagesWall","SubmitOrEditArticle","props","config","rtl","form","useForm","imageUrlsList","setImageUrlsList","setFieldsValue","title","text","onFinish","values","id","fetch","method","credentials","headers","body","JSON","stringify","images","then","res","ok","json","statusText","success","action","_id","timestamp","catch","err","error","console","log","newImageUrlsList","width","areEqualSubmitOrEditArticle","prevProps","nextProps"],"mappings":"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","sourcesContent":["import React, {memo, useEffect, useState} from \"react\";\nimport {Input, Button, Form, Card, Divider, message} from \"antd\";\nimport {showBackendMessage, stringArrayEqual} from \"../util/Functions\";\nimport ImagesWall from \"./ImageWall\";\n\n\n// TODO: React.lazy\nconst SubmitOrEditArticle = (props) => {\n    message.config({\n        rtl: false,\n    });\n    const [form] = Form.useForm();\n    const [imageUrlsList, setImageUrlsList] = useState(props.imageUrlsList);\n\n    useEffect(() => {\n        form.setFieldsValue({\n            \"title\": props.title,\n            \"text\": props.text,\n        });\n    }, [form, props]);\n\n    const onFinish = async (values) => {\n        if (props.id) {\n            await fetch(\"http://localhost:4000/article/\" + props.id, {\n                method: \"PUT\",\n                credentials: \"include\",\n                headers: {\"Content-Type\": \"application/json\"},\n                body: JSON.stringify({\n                    title: values.title,\n                    text: values.text,\n                    images: imageUrlsList,\n                }),\n            }).then(res => {\n                if (res.ok) {\n                    showBackendMessage().then();\n                    return res.json();\n                } else {\n                    throw res.statusText;\n                }\n            }).then(res => {\n                message.success(\"Edit Successfully\");\n                props.action({\n                    id: res._id,\n                    title: res.title,\n                    text: res.text,\n                    timestamp: res.timestamp,\n                    images: res.images,\n                });\n            }).catch(err => message.error(err, 1));\n        } else {\n            await fetch(\"http://localhost:4000/article\", {\n                method: \"POST\",\n                credentials: \"include\",\n                headers: {\"Content-Type\": \"application/json\"},\n                body: JSON.stringify({\n                    title: values.title,\n                    text: values.text,\n                    images: imageUrlsList,\n                }),\n            }).then(res => {\n                if (res.ok) {\n                    showBackendMessage().then();\n                    return res.json();\n                } else {\n                    throw res.statusText;\n                }\n            }).then(res => {\n                message.success(\"Submit Successfully\", 1);\n                console.log(\"res._id\", res._id);\n                props.action(res._id);\n            }).catch(err => message.error(err, 1));\n        }\n    }\n\n    return (\n        <Card bordered={true}>\n            <Divider orientation=\"left\">{\n                props.id ? \"Edit this article\" : \"Add new article\"\n            }</Divider>\n            <Form onFinish={onFinish} form={form}>\n                <Form.Item name=\"title\">\n                    <Input/>\n                </Form.Item>\n                <Form.Item name=\"text\">\n                    <Input.TextArea/>\n                </Form.Item>\n                <Form.Item>\n                    <ImagesWall\n                        imageUrlsList={imageUrlsList}\n                        action={newImageUrlsList => setImageUrlsList(newImageUrlsList)} />\n                </Form.Item>\n                <Form.Item>\n                    <Button style={{width: \"50%\"}} htmlType=\"submit\" type=\"primary\">\n                        Submit\n                    </Button>\n                    <Button style={{width: \"50%\"}} htmlType=\"reset\" type=\"default\">\n                        Clear\n                    </Button>\n                </Form.Item>\n            </Form>\n        </Card>\n    )\n}\n\nconst areEqualSubmitOrEditArticle = (prevProps, nextProps) => {\n    return prevProps.id === nextProps.id\n        && prevProps.title === nextProps.title\n        && prevProps.text === nextProps.text\n        && stringArrayEqual(prevProps.imageUrlsList, nextProps.imageUrlsList);\n}\n\nexport default memo(SubmitOrEditArticle, areEqualSubmitOrEditArticle);\n"]},"metadata":{},"sourceType":"module"}
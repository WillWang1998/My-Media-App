{"ast":null,"code":"import _objectSpread from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{showBackendMessage}from\"../util/Functions\";import EventBus from\"../util/EventBus\";import{Button,Form,message}from\"antd\";import{formItemLayout,tailFormItemLayout}from\"../util/Layout\";import{GoogleOutlined}from\"@ant-design/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GoogleLinking=function GoogleLinking(){message.config({rtl:false});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),googleEmail=_useState2[0],setGoogleEmail=_useState2[1];var load=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:4000/google_email\",{method:\"GET\",credentials:\"include\"}).then(function(res){if(res.ok){showBackendMessage();return res.json();}else{throw res.statusText;}}).then(function(res){setGoogleEmail(res.google_email);}).catch(function(err){return message.error(err,1);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function load(){return _ref.apply(this,arguments);};}();useEffect(function(){return load();},[]);EventBus.addEventListener(\"reload_google_binding\",load);EventBus.addEventListener(\"reload_all\",load);EventBus.addEventListener(\"clear_all_states\",function(){setGoogleEmail(\"\");});var onFinish=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:window.location.href=\"http://localhost:4000/auth/google\";case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function onFinish(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},formItemLayout),{},{name:\"userGoogleBinding\",autoComplete:\"off\",onFinish:onFinish,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"googleEmail\",label:\"Google Account\",children:/*#__PURE__*/_jsx(\"span\",{className:\"ant-form-text\",children:googleEmail?googleEmail:\"You have not linked your Google account.\"})}),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},tailFormItemLayout),{},{children:/*#__PURE__*/_jsxs(Button,{type:\"primary\",htmlType:\"submit\",children:[\"Link your account with \",/*#__PURE__*/_jsx(GoogleOutlined,{})]})}))]}));};export default GoogleLinking;","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/final-frontend-WillWang1998/src/component/GoogleLinking.js"],"names":["React","useEffect","useState","showBackendMessage","EventBus","Button","Form","message","formItemLayout","tailFormItemLayout","GoogleOutlined","GoogleLinking","config","rtl","googleEmail","setGoogleEmail","load","fetch","method","credentials","then","res","ok","json","statusText","google_email","catch","err","error","addEventListener","onFinish","window","location","href"],"mappings":"osBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,kBAAR,KAAiC,mBAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,OAAQC,MAAR,CAAgBC,IAAhB,CAAsBC,OAAtB,KAAoC,MAApC,CACA,OAAQC,cAAR,CAAwBC,kBAAxB,KAAiD,gBAAjD,CACA,OAAQC,cAAR,KAA6B,mBAA7B,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAExBJ,OAAO,CAACK,MAAR,CAAe,CACXC,GAAG,CAAE,KADM,CAAf,EAGA,cAAsCX,QAAQ,CAAC,EAAD,CAA9C,wCAAOY,WAAP,eAAoBC,cAApB,eAEA,GAAMC,CAAAA,IAAI,0FAAG,yJACHC,CAAAA,KAAK,CAAC,oCAAD,CAAuC,CAC9CC,MAAM,CAAE,KADsC,CAE9CC,WAAW,CAAE,SAFiC,CAAvC,CAAL,CAGHC,IAHG,CAGE,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,EAAR,CAAY,CACRnB,kBAAkB,GAClB,MAAOkB,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACH,CAHD,IAGO,CACH,KAAMF,CAAAA,GAAG,CAACG,UAAV,CACH,CACJ,CAVK,EAUHJ,IAVG,CAUE,SAAAC,GAAG,CAAI,CACXN,cAAc,CAACM,GAAG,CAACI,YAAL,CAAd,CACH,CAZK,EAYHC,KAZG,CAYG,SAAAC,GAAG,QAAIpB,CAAAA,OAAO,CAACqB,KAAR,CAAcD,GAAd,CAAmB,CAAnB,CAAJ,EAZN,CADG,uDAAH,kBAAJX,CAAAA,IAAI,0CAAV,CAgBAf,SAAS,CAAC,iBAAMe,CAAAA,IAAI,EAAV,EAAD,CAAe,EAAf,CAAT,CACAZ,QAAQ,CAACyB,gBAAT,CAA0B,uBAA1B,CAAmDb,IAAnD,EACAZ,QAAQ,CAACyB,gBAAT,CAA0B,YAA1B,CAAwCb,IAAxC,EACAZ,QAAQ,CAACyB,gBAAT,CAA0B,kBAA1B,CAA8C,UAAM,CAChDd,cAAc,CAAC,EAAD,CAAd,CACH,CAFD,EAIA,GAAMe,CAAAA,QAAQ,2FAAG,wIACbC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,mCAAvB,CADa,wDAAH,kBAARH,CAAAA,QAAQ,2CAAd,CAIA,mBACI,MAAC,IAAD,gCAAUtB,cAAV,MACM,IAAI,CAAC,mBADX,CAEM,YAAY,CAAC,KAFnB,CAGM,QAAQ,CAAEsB,QAHhB,wBAKI,KAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,aAAhB,CACW,KAAK,CAAC,gBADjB,uBAGI,aAAM,SAAS,CAAC,eAAhB,UACKhB,WAAW,CAAGA,WAAH,CAAiB,0CADjC,EAHJ,EALJ,cAaI,KAAC,IAAD,CAAM,IAAN,gCAAeL,kBAAf,4BACI,MAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAC,QAAhC,kDAC4B,KAAC,cAAD,IAD5B,GADJ,GAbJ,IADJ,CAqBH,CAvDD,CAyDA,cAAeE,CAAAA,aAAf","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {showBackendMessage} from \"../util/Functions\";\nimport EventBus from \"../util/EventBus\";\nimport {Button, Form, message} from \"antd\";\nimport {formItemLayout, tailFormItemLayout} from \"../util/Layout\";\nimport {GoogleOutlined} from \"@ant-design/icons\";\n\nconst GoogleLinking = () => {\n\n    message.config({\n        rtl: false,\n    });\n    const [googleEmail, setGoogleEmail] = useState(\"\");\n\n    const load = async () => {\n        await fetch(\"http://localhost:4000/google_email\", {\n            method: \"GET\",\n            credentials: \"include\",\n        }).then(res => {\n            if (res.ok) {\n                showBackendMessage();\n                return res.json();\n            } else {\n                throw res.statusText;\n            }\n        }).then(res => {\n            setGoogleEmail(res.google_email);\n        }).catch(err => message.error(err, 1));\n    }\n\n    useEffect(() => load(), []);\n    EventBus.addEventListener(\"reload_google_binding\", load);\n    EventBus.addEventListener(\"reload_all\", load);\n    EventBus.addEventListener(\"clear_all_states\", () => {\n        setGoogleEmail(\"\");\n    });\n\n    const onFinish = async () => {\n        window.location.href = \"http://localhost:4000/auth/google\";\n    }\n\n    return (\n        <Form {...formItemLayout}\n              name=\"userGoogleBinding\"\n              autoComplete=\"off\"\n              onFinish={onFinish}\n        >\n            <Form.Item name=\"googleEmail\"\n                       label=\"Google Account\"\n            >\n                <span className=\"ant-form-text\">\n                    {googleEmail ? googleEmail : \"You have not linked your Google account.\"}\n                </span>\n            </Form.Item>\n\n            <Form.Item {...tailFormItemLayout}>\n                <Button type=\"primary\" htmlType=\"submit\">\n                    Link your account with {<GoogleOutlined/>}\n                </Button>\n            </Form.Item>\n        </Form>\n    )\n}\n\nexport default GoogleLinking;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/willwang98/Rice Homework/hw6-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import moment from\"moment\";export var userNamePasswordMap=new Map();export var userNameInfoMap=new Map();export var idUserNameMap=new Map();export var userNameIdMap=new Map();export var posts=[];var infosRequest=new XMLHttpRequest();infosRequest.open(\"GET\",\"https://jsonplaceholder.typicode.com/users\",false);infosRequest.send(null);var infoRaw=eval(infosRequest.responseText);var _iterator=_createForOfIteratorHelper(infoRaw),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;idUserNameMap.set(item.id,item.username);userNameIdMap.set(item.username,item.id);userNamePasswordMap.set(item.username,item.address.street);userNameInfoMap.set(item.username,{id:item.id,phone:item.phone,email:item.email,zipcode:item.address.zipcode,displayName:item.displayName,status:item.company.catchPhrase,DOB:moment(\"2000-01-01\"),avatar:\"https://joeschmoe.io/api/v1/\"+item.username});}}catch(err){_iterator.e(err);}finally{_iterator.f();}var curLogin=window.localStorage.getItem(\"userName\");if(userNameInfoMap.has(curLogin)){}else{window.localStorage.removeItem(\"userName\");}curLogin=window.localStorage.getItem(\"userName\");function getFollowingsID(id){// hard code now\nif(id===1){return[2,3,4];}else if(id===2){return[1,3,4];}else if(id===3){return[1,2,4];}else if(id<=10){return[1,2,3];}else return[1];}export function getFollowings(userName){var followingsID=getFollowingsID(userNameIdMap.get(userName));var followings=[];var _iterator2=_createForOfIteratorHelper(followingsID),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var id=_step2.value;followings.push({userName:idUserNameMap.get(id),avatar:userNameInfoMap.get(idUserNameMap.get(id)).avatar,status:userNameInfoMap.get(idUserNameMap.get(id)).status});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return followings;}var _iterator3=_createForOfIteratorHelper(infoRaw),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _item=_step3.value;var temp=userNameInfoMap.get(_item.username);temp.followings=getFollowings(_item.username);userNameInfoMap.set(_item.username,temp);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var postsRequest=new XMLHttpRequest();postsRequest.open(\"GET\",\"https://jsonplaceholder.typicode.com/posts\",false);postsRequest.send(null);var postsRaw=eval(postsRequest.responseText);var _iterator4=_createForOfIteratorHelper(postsRaw),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _item2=_step4.value;posts.push({userName:idUserNameMap.get(_item2.userId),id:_item2.id,title:_item2.title,body:_item2.body,avatar:userNameInfoMap.get(idUserNameMap.get(_item2.userId)).avatar,image:\"https://picsum.photos/200/200?random=\"+_item2.title,timestamp:Math.ceil((new Date().valueOf()-1000000000000)*Math.random()+1000000000000),comments:[// Hard code here\n{author:\"Bret\",avatar:userNameInfoMap.get(\"Bret\").avatar,content:\"quia et suscipit\\\\nsuscipit recusandae consequuntur expedita et cum\\\\nreprehenderit molestiae ut ut quas totam\\\\nnostrum rerum est autem sunt rem eveniet architecto\"},{author:\"Antonette\",avatar:userNameInfoMap.get(\"Antonette\").avatar,content:\"delectus reiciendis molestiae occaecati non minima eveniet qui voluptatibus\\naccusamus in eum beatae sit\\nvel qui neque voluptates ut commodi qui incidunt\\nut animi commodi\"},{author:\"Samantha\",avatar:userNameInfoMap.get(\"Samantha\").avatar,content:\"repellat aliquid praesentium dolorem quo\\nsed totam minus non itaque\\nnihil labore molestiae sunt dolor eveniet hic recusandae veniam\\ntempora et tenetur expedita sunt\"}]});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}export function getFollowingsAndSelfPosts(userName,followings){var searchFilter=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"\";var followingsAndSelfPosts=[];for(var i=posts.length-1;i>=0;--i){var post=posts[i];if(post.userName.indexOf(searchFilter)===-1&&post.title.indexOf(searchFilter)===-1&&post.body.indexOf(searchFilter)===-1){continue;}if(post.userName===userName){followingsAndSelfPosts.push(post);}else{var _iterator5=_createForOfIteratorHelper(followings),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var following=_step5.value;if(post.userName===following.userName){followingsAndSelfPosts.push(post);}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}}followingsAndSelfPosts.sort(function(postA,postB){return postB.timestamp-postA.timestamp;});return followingsAndSelfPosts;}export function checkUserNamePassword(userName,password){return userNamePasswordMap.get(userName)===password;}export function addUser(userName,email,phone,DOB,zipcode,displayName,password){userNamePasswordMap.set(userName,password);userNameIdMap.set(userName,newID);idUserNameMap.set(newID,userName);var newUserInfo={};newUserInfo.email=email;newUserInfo.id=newID;newUserInfo.status=null;newUserInfo.phone=phone;newUserInfo.DOB=DOB;newUserInfo.followings=getFollowings(userName);newUserInfo.zipcode=zipcode;newUserInfo.displayName=displayName;newUserInfo.avatar=\"https://joeschmoe.io/api/v1/\"+userName;userNameInfoMap.set(userName,newUserInfo);}var newID=11;export function getNewUserID(){return newID++;}export function removeNewUserID(){//only for test\nif(newID>11){--newID;}}export function removeUser(userName){idUserNameMap.delete(userNameIdMap.get(userName));userNamePasswordMap.delete(userName);userNameInfoMap.delete(userName);userNameIdMap.delete(userName);}var postID=101;export function getNewPostID(){return postID++;}export function removeNewPostID(){//only for test\nif(postID>101){--postID;}}export function addPost(post){posts.push(post);console.log(posts);}export function removePost(id){posts.splice(id-1,1);}export function updateUser(userName,info){var temp=userNameInfoMap.get(userName);temp.status=info.status;temp.email=info.email;temp.phone=info.phone;temp.DOB=info.DOB;temp.zipcode=info.zipcode;temp.displayName=info.displayName;userNameInfoMap.set(userName,temp);}export var initialState=curLogin?{isAuthenticated:true,logInOrRegisterMessage:null,updateProfileMessage:null,addFollowingMessage:null,menuState:\"home\",id:userNameIdMap.get(curLogin),userName:window.localStorage.getItem(\"userName\"),avatar:userNameInfoMap.get(curLogin).avatar,email:userNameInfoMap.get(curLogin).email,phone:userNameInfoMap.get(curLogin).phone,DOB:userNameInfoMap.get(curLogin).DOB,zipcode:userNameInfoMap.get(curLogin).zipcode,displayName:userNameInfoMap.get(curLogin).displayName,followings:userNameInfoMap.get(curLogin).followings,status:userNameInfoMap.get(curLogin).status,// company's catch phrase\nsearchWord:\"\",selectedPosts:getFollowingsAndSelfPosts(curLogin,userNameInfoMap.get(curLogin).followings)}:{isAuthenticated:false,logInOrRegisterMessage:null,updateProfileMessage:null,addFollowingMessage:null,menuState:\"logout\",id:null,userName:null,avatar:null,email:null,phone:null,DOB:null,zipcode:null,displayName:null,followings:[],status:null,// company's catch phrase\nsearchWord:\"\",selectedPosts:[]};","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/hw6-frontend-WillWang1998/src/fake_backend.js"],"names":["moment","userNamePasswordMap","Map","userNameInfoMap","idUserNameMap","userNameIdMap","posts","infosRequest","XMLHttpRequest","open","send","infoRaw","eval","responseText","item","set","id","username","address","street","phone","email","zipcode","displayName","status","company","catchPhrase","DOB","avatar","curLogin","window","localStorage","getItem","has","removeItem","getFollowingsID","getFollowings","userName","followingsID","get","followings","push","temp","postsRequest","postsRaw","userId","title","body","image","timestamp","Math","ceil","Date","valueOf","random","comments","author","content","getFollowingsAndSelfPosts","searchFilter","followingsAndSelfPosts","i","length","post","indexOf","following","sort","postA","postB","checkUserNamePassword","password","addUser","newID","newUserInfo","getNewUserID","removeNewUserID","removeUser","delete","postID","getNewPostID","removeNewPostID","addPost","console","log","removePost","splice","updateUser","info","initialState","isAuthenticated","logInOrRegisterMessage","updateProfileMessage","addFollowingMessage","menuState","searchWord","selectedPosts"],"mappings":"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","sourcesContent":["import moment from \"moment\";\n\nexport let userNamePasswordMap = new Map();\nexport let userNameInfoMap = new Map();\nexport let idUserNameMap = new Map();\nexport let userNameIdMap = new Map();\n\nexport let posts = [];\n\nlet infosRequest = new XMLHttpRequest();\ninfosRequest.open(\"GET\", \"https://jsonplaceholder.typicode.com/users\", false);\ninfosRequest.send(null);\nlet infoRaw = eval(infosRequest.responseText);\n\nfor (let item of infoRaw) {\n    idUserNameMap.set(item.id, item.username);\n    userNameIdMap.set(item.username, item.id);\n    userNamePasswordMap.set(item.username, item.address.street);\n    userNameInfoMap.set(item.username, {\n        id: item.id,\n        phone: item.phone,\n        email: item.email,\n        zipcode: item.address.zipcode,\n        displayName: item.displayName,\n        status: item.company.catchPhrase,\n        DOB: moment(\"2000-01-01\"),\n        avatar: \"https://joeschmoe.io/api/v1/\" + item.username,\n    });\n}\n\nlet curLogin = window.localStorage.getItem(\"userName\");\nif (userNameInfoMap.has(curLogin)) {\n} else {\n    window.localStorage.removeItem(\"userName\");\n}\ncurLogin = window.localStorage.getItem(\"userName\");\n\nfunction getFollowingsID(id) { // hard code now\n    if (id === 1) {\n        return [2, 3, 4];\n    } else if (id === 2) {\n        return [1, 3, 4];\n    } else if (id === 3) {\n        return [1, 2, 4];\n    } else if (id <= 10) {\n        return [1, 2, 3];\n    } else return [1];\n}\n\nexport function getFollowings(userName) {\n    let followingsID = getFollowingsID(userNameIdMap.get(userName));\n    let followings = [];\n    for (let id of followingsID) {\n        followings.push({\n            userName: idUserNameMap.get(id),\n            avatar: userNameInfoMap.get(idUserNameMap.get(id)).avatar,\n            status: userNameInfoMap.get(idUserNameMap.get(id)).status,\n        });\n    }\n    return followings;\n}\n\nfor (let item of infoRaw) {\n    let temp = userNameInfoMap.get(item.username);\n    temp.followings = getFollowings(item.username);\n    userNameInfoMap.set(item.username, temp);\n}\n\nlet postsRequest = new XMLHttpRequest();\npostsRequest.open(\"GET\", \"https://jsonplaceholder.typicode.com/posts\", false);\npostsRequest.send(null);\nlet postsRaw = eval(postsRequest.responseText);\n\nfor (let item of postsRaw) {\n    posts.push({\n        userName: idUserNameMap.get(item.userId),\n        id: item.id,\n        title: item.title,\n        body: item.body,\n        avatar: userNameInfoMap.get(idUserNameMap.get(item.userId)).avatar,\n        image: \"https://picsum.photos/200/200?random=\" + item.title,\n        timestamp: Math.ceil((new Date().valueOf() - 1000000000000) * Math.random() + 1000000000000),\n        comments: [ // Hard code here\n            {\n                author: \"Bret\",\n                avatar: userNameInfoMap.get(\"Bret\").avatar,\n                content: \"quia et suscipit\\\\nsuscipit recusandae consequuntur expedita et cum\\\\nreprehenderit molestiae ut ut quas totam\\\\nnostrum rerum est autem sunt rem eveniet architecto\"\n            },\n            {\n                author: \"Antonette\",\n                avatar: userNameInfoMap.get(\"Antonette\").avatar,\n                content: \"delectus reiciendis molestiae occaecati non minima eveniet qui voluptatibus\\naccusamus in eum beatae sit\\nvel qui neque voluptates ut commodi qui incidunt\\nut animi commodi\"\n            },\n            {\n                author: \"Samantha\",\n                avatar: userNameInfoMap.get(\"Samantha\").avatar,\n                content: \"repellat aliquid praesentium dolorem quo\\nsed totam minus non itaque\\nnihil labore molestiae sunt dolor eveniet hic recusandae veniam\\ntempora et tenetur expedita sunt\"\n            }\n        ],\n    })\n}\n\nexport function getFollowingsAndSelfPosts(userName, followings, searchFilter = \"\") {\n    let followingsAndSelfPosts = [];\n    for (let i = posts.length - 1; i >= 0; --i) {\n        let post = posts[i];\n        if (post.userName.indexOf(searchFilter) === -1\n            && post.title.indexOf(searchFilter) === -1\n            && post.body.indexOf(searchFilter) === -1) {\n            continue;\n        }\n        if (post.userName === userName) {\n            followingsAndSelfPosts.push(post);\n        } else {\n            for (let following of followings) {\n                if (post.userName === following.userName) {\n                    followingsAndSelfPosts.push(post);\n                }\n            }\n        }\n    }\n    followingsAndSelfPosts.sort((postA, postB) => {\n        return postB.timestamp - postA.timestamp;\n    })\n    return followingsAndSelfPosts;\n}\n\nexport function checkUserNamePassword(userName, password) {\n    return userNamePasswordMap.get(userName) === password;\n}\n\nexport function addUser(userName, email, phone, DOB, zipcode, displayName, password) {\n    userNamePasswordMap.set(userName, password);\n    userNameIdMap.set(userName, newID);\n    idUserNameMap.set(newID, userName);\n    let newUserInfo = {};\n    newUserInfo.email = email;\n    newUserInfo.id = newID;\n    newUserInfo.status = null;\n    newUserInfo.phone = phone;\n    newUserInfo.DOB = DOB;\n    newUserInfo.followings = getFollowings(userName);\n    newUserInfo.zipcode = zipcode;\n    newUserInfo.displayName = displayName;\n    newUserInfo.avatar = \"https://joeschmoe.io/api/v1/\" + userName;\n    userNameInfoMap.set(userName, newUserInfo);\n}\n\nlet newID = 11;\n\nexport function getNewUserID() {\n    return newID++;\n}\n\nexport function removeNewUserID() { //only for test\n    if (newID > 11) {\n        --newID;\n    }\n}\n\nexport function removeUser(userName) {\n    idUserNameMap.delete(userNameIdMap.get(userName))\n    userNamePasswordMap.delete(userName);\n    userNameInfoMap.delete(userName);\n    userNameIdMap.delete(userName);\n}\n\nlet postID = 101;\n\nexport function getNewPostID() {\n    return postID++;\n}\n\nexport function removeNewPostID() { //only for test\n    if (postID > 101) {\n        --postID;\n    }\n}\n\nexport function addPost(post) {\n    posts.push(post);\n    console.log(posts);\n}\n\nexport function removePost(id) {\n    posts.splice(id - 1, 1);\n}\n\nexport function updateUser(userName, info) {\n    let temp = userNameInfoMap.get(userName);\n    temp.status = info.status;\n    temp.email = info.email;\n    temp.phone = info.phone;\n    temp.DOB = info.DOB;\n    temp.zipcode = info.zipcode;\n    temp.displayName = info.displayName;\n    userNameInfoMap.set(userName, temp);\n}\n\nexport const initialState = curLogin ? {\n    isAuthenticated: true,\n    logInOrRegisterMessage: null,\n    updateProfileMessage: null,\n    addFollowingMessage: null,\n    menuState: \"home\",\n    id: userNameIdMap.get(curLogin),\n    userName: window.localStorage.getItem(\"userName\"),\n    avatar: userNameInfoMap.get(curLogin).avatar,\n    email: userNameInfoMap.get(curLogin).email,\n    phone: userNameInfoMap.get(curLogin).phone,\n    DOB: userNameInfoMap.get(curLogin).DOB,\n    zipcode: userNameInfoMap.get(curLogin).zipcode,\n    displayName: userNameInfoMap.get(curLogin).displayName,\n    followings: userNameInfoMap.get(curLogin).followings,\n    status: userNameInfoMap.get(curLogin).status, // company's catch phrase\n    searchWord: \"\",\n    selectedPosts: getFollowingsAndSelfPosts(curLogin, userNameInfoMap.get(curLogin).followings)\n} : {\n    isAuthenticated: false,\n    logInOrRegisterMessage: null,\n    updateProfileMessage: null,\n    addFollowingMessage: null,\n    menuState: \"logout\",\n    id: null,\n    userName: null,\n    avatar: null,\n    email: null,\n    phone: null,\n    DOB: null,\n    zipcode: null,\n    displayName: null,\n    followings: [],\n    status: null, // company's catch phrase\n    searchWord: \"\",\n    selectedPosts: []\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/src/component/RegisterForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button, DatePicker, Form, Input, message, Space } from \"antd\";\nimport { formItemLayout, tailFormItemLayout } from \"../util/Layout\";\nimport { useHistory } from \"react-router-dom\";\nimport { disabledDate, showBackendMessage } from \"../util/Functions\";\nimport Cookies from \"js-cookie\";\nimport EventBus from \"../util/EventBus\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RegisterForm = () => {\n  _s();\n\n  message.config({\n    rtl: false\n  });\n  const [form] = Form.useForm();\n  const history = useHistory();\n  const [username, setUsername] = useState(\"\");\n  const [displayedName, setDisplayedName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n\n  const load = () => {\n    setUsername(Cookies.get(\"usernameForGoogle\"));\n    setDisplayedName(Cookies.get(\"displayedNameForGoogle\"));\n    setEmail(Cookies.get(\"emailForGoogle\"));\n    Cookies.remove(\"usernameForGoogle\");\n    Cookies.remove(\"displayedNameForGoogle\");\n    Cookies.remove(\"emailForGoogle\");\n  };\n\n  useEffect(() => {\n    form.setFieldsValue({\n      \"username\": username,\n      \"displayedName\": displayedName,\n      \"email\": email\n    });\n  }, [username, displayedName, email]);\n  useEffect(load, []);\n  EventBus.addEventListener(\"clear_all_states\", () => {\n    setUsername(\"\");\n    setDisplayedName(\"\");\n    setEmail(\"\");\n  });\n  EventBus.addEventListener(\"reload_all\", load);\n\n  const onFinish = async values => {\n    await fetch(\"http://localhost:4000/register\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: values.username,\n        email: values.email,\n        phone: values.phone,\n        dob: values.dob.toDate(),\n        zipcode: values.zipcode,\n        displayedName: values.displayedName,\n        password: values.password\n      })\n    }).then(res => {\n      if (res.ok) {\n        showBackendMessage();\n        return res.json();\n      } else {\n        throw res.statusText;\n      }\n    }).then(() => {\n      message.success(\"Register successfully!\");\n      history.push({\n        pathname: \"/home\"\n      });\n    }).catch(err => message.error(err, 1));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, { ...formItemLayout,\n    name: \"register\",\n    layout: \"horizontal\",\n    autoComplete: \"off\",\n    onFinish: onFinish,\n    form: form,\n    children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"username\",\n      label: \"Username\",\n      rules: [{\n        pattern: /[a-zA-Z][a-zA-Z0-9]*/,\n        message: 'Your account name can contain lowercase and uppercase Latin letter and number. The first letter cannot be a number.'\n      }, {\n        required: true,\n        message: 'Please input your username!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"displayedName\",\n      label: \"Displayed Name\",\n      rules: [{\n        pattern: /[a-zA-Z][a-zA-Z0-9]*/,\n        message: 'Your account name can contain lowercase and uppercase Latin letter and number. The first letter cannot be a number.'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"email\",\n      label: \"E-mail\",\n      rules: [{\n        type: 'email',\n        message: 'Please input your valid E-mail like a@b.co!'\n      }, {\n        required: true,\n        message: 'Please input your E-mail!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"a@b.co\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"phone\",\n      label: \"Phone Number\",\n      rules: [{\n        pattern: /^[0-9]{10}$/,\n        message: 'Please input your phone number like 1231231234!'\n      }, {\n        required: true,\n        message: 'Please input your phone number!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"1231231234\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"dob\",\n      label: \"Date of Birth\",\n      rules: [{\n        required: true,\n        message: 'Please input your date of birth!'\n      }],\n      extra: \"Only individuals 18 years of age or older on the day of registration are allowed to register.\",\n      children: /*#__PURE__*/_jsxDEV(DatePicker, {\n        format: 'MM/DD/YYYY',\n        style: {\n          width: '100%'\n        },\n        disabledDate: disabledDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"zipcode\",\n      label: \"Zipcode\",\n      rules: [{\n        pattern: /^[0-9]{5}$/,\n        message: 'Please input your phone zipcode like 12345!'\n      }, {\n        required: true,\n        message: 'Please input your phone zipcode!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"12345\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"password\",\n      label: \"Password\",\n      rules: [{\n        required: true,\n        message: 'Please input your password!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input.Password, {\n        visibilityToggle: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"passwordConfirmation\",\n      label: \"Confirmation\",\n      dependencies: ['password'],\n      rules: [{\n        required: true,\n        message: 'Please confirm your password!'\n      }, ({\n        getFieldValue\n      }) => ({\n        validator(_, value) {\n          if (!value || getFieldValue('password') === value) {\n            return Promise.resolve();\n          }\n\n          return Promise.reject(new Error('The two passwords you entered do not match!'));\n        }\n\n      })],\n      children: /*#__PURE__*/_jsxDEV(Input.Password, {\n        visibilityToggle: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...tailFormItemLayout,\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        size: 8,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          htmlType: \"reset\",\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n\n_s(RegisterForm, \"8i7Rle7wzlO1JFCyLQjpm3N+zdE=\", false, function () {\n  return [Form.useForm, useHistory];\n});\n\n_c = RegisterForm;\nexport default RegisterForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterForm\");","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/final-frontend-WillWang1998/src/component/RegisterForm.js"],"names":["React","useEffect","useState","Button","DatePicker","Form","Input","message","Space","formItemLayout","tailFormItemLayout","useHistory","disabledDate","showBackendMessage","Cookies","EventBus","RegisterForm","config","rtl","form","useForm","history","username","setUsername","displayedName","setDisplayedName","email","setEmail","load","get","remove","setFieldsValue","addEventListener","onFinish","values","fetch","method","credentials","headers","body","JSON","stringify","phone","dob","toDate","zipcode","password","then","res","ok","json","statusText","success","push","pathname","catch","err","error","pattern","required","type","width","getFieldValue","validator","_","value","Promise","resolve","reject","Error"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {Button, DatePicker, Form, Input, message, Space} from \"antd\";\nimport {formItemLayout, tailFormItemLayout} from \"../util/Layout\";\nimport {useHistory} from \"react-router-dom\";\nimport {disabledDate, showBackendMessage} from \"../util/Functions\";\nimport Cookies from \"js-cookie\";\nimport EventBus from \"../util/EventBus\";\n\nconst RegisterForm = () => {\n\n    message.config({\n        rtl: false,\n    });\n    const [form] = Form.useForm();\n    const history = useHistory();\n    const [username, setUsername] = useState(\"\");\n    const [displayedName, setDisplayedName] = useState(\"\")\n    const [email, setEmail] = useState(\"\");\n\n\n    const load = () => {\n        setUsername(Cookies.get(\"usernameForGoogle\"));\n        setDisplayedName(Cookies.get(\"displayedNameForGoogle\"));\n        setEmail(Cookies.get(\"emailForGoogle\"));\n        Cookies.remove(\"usernameForGoogle\");\n        Cookies.remove(\"displayedNameForGoogle\");\n        Cookies.remove(\"emailForGoogle\");\n    }\n\n    useEffect(() => {\n        form.setFieldsValue({\n            \"username\": username,\n            \"displayedName\": displayedName,\n            \"email\": email,\n        });\n    }, [username, displayedName, email]);\n\n    useEffect(load, []);\n\n    EventBus.addEventListener(\"clear_all_states\", () => {\n        setUsername(\"\");\n        setDisplayedName(\"\");\n        setEmail(\"\");\n    });\n    EventBus.addEventListener(\"reload_all\", load);\n\n    const onFinish = async (values) => {\n        await fetch(\"http://localhost:4000/register\",{\n            method: \"POST\",\n            credentials: \"include\",\n            headers: {\"Content-Type\": \"application/json\"},\n            body: JSON.stringify({\n                username: values.username,\n                email: values.email,\n                phone: values.phone,\n                dob: values.dob.toDate(),\n                zipcode: values.zipcode,\n                displayedName: values.displayedName,\n                password: values.password\n            }),\n        }).then(res => {\n            if (res.ok) {\n                showBackendMessage();\n                return res.json();\n            } else {\n                throw res.statusText;\n            }\n        }).then(() => {\n            message.success(\"Register successfully!\");\n            history.push({\n                pathname:\"/home\"\n            });\n        }).catch(err => message.error(err, 1));\n    };\n\n    return (\n        <Form {...formItemLayout}\n              name=\"register\"\n              layout=\"horizontal\"\n              autoComplete=\"off\"\n              onFinish={onFinish}\n              form={form}\n        >\n            <Form.Item name=\"username\"\n                       label=\"Username\"\n                       rules={[\n                           {\n                               pattern: /[a-zA-Z][a-zA-Z0-9]*/,\n                               message: 'Your account name can contain lowercase and uppercase Latin letter and number. The first letter cannot be a number.'\n                           },\n                           {\n                               required: true,\n                               message: 'Please input your username!',\n                           }\n                       ]}\n            >\n                <Input/>\n            </Form.Item>\n\n            <Form.Item name=\"displayedName\"\n                       label=\"Displayed Name\"\n                       rules={[\n                           {\n                               pattern: /[a-zA-Z][a-zA-Z0-9]*/,\n                               message: 'Your account name can contain lowercase and uppercase Latin letter and number. The first letter cannot be a number.'\n                           },\n                       ]}\n            >\n                <Input/>\n            </Form.Item>\n\n            <Form.Item name=\"email\"\n                       label=\"E-mail\"\n                       rules={[\n                           {\n                               type: 'email',\n                               message: 'Please input your valid E-mail like a@b.co!',\n                           },\n                           {\n                               required: true,\n                               message: 'Please input your E-mail!',\n                           },\n                       ]}\n            >\n                <Input placeholder=\"a@b.co\"/>\n            </Form.Item>\n\n            <Form.Item name=\"phone\"\n                       label=\"Phone Number\"\n                       rules={[\n                           {\n                               pattern: /^[0-9]{10}$/,\n                               message: 'Please input your phone number like 1231231234!'\n                           },\n                           {\n                               required: true,\n                               message: 'Please input your phone number!',\n                           },\n                       ]}\n            >\n                <Input placeholder=\"1231231234\"/>\n            </Form.Item>\n\n            <Form.Item name=\"dob\"\n                       label=\"Date of Birth\"\n                       rules={[\n                           {\n                               required: true,\n                               message: 'Please input your date of birth!',\n                           },\n                       ]}\n                       extra=\"Only individuals 18 years of age or older on the day of registration are allowed to register.\"\n            >\n                <DatePicker format={'MM/DD/YYYY'}\n                            style={{width: '100%'}}\n                            disabledDate={disabledDate}/>\n            </Form.Item>\n\n            <Form.Item name=\"zipcode\"\n                       label=\"Zipcode\"\n                       rules={[\n                           {\n                               pattern: /^[0-9]{5}$/,\n                               message: 'Please input your phone zipcode like 12345!'\n                           },\n                           {\n                               required: true,\n                               message: 'Please input your phone zipcode!',\n                           },\n                       ]}\n            >\n                <Input placeholder=\"12345\"/>\n            </Form.Item>\n\n            <Form.Item name=\"password\"\n                       label=\"Password\"\n                       rules={[\n                           {\n                               required: true,\n                               message: 'Please input your password!',\n                           }\n                       ]}\n\n            >\n                <Input.Password visibilityToggle={false}/>\n            </Form.Item>\n\n            <Form.Item\n                name=\"passwordConfirmation\"\n                label=\"Confirmation\"\n                dependencies={['password']}\n                rules={[\n                    {\n                        required: true,\n                        message: 'Please confirm your password!',\n                    },\n                    ({getFieldValue}) => ({\n                        validator(_, value) {\n                            if (!value || getFieldValue('password') === value) {\n                                return Promise.resolve();\n                            }\n                            return Promise.reject(new Error('The two passwords you entered do not match!'));\n                        },\n                    }),\n                ]}\n            >\n                <Input.Password visibilityToggle={false}/>\n            </Form.Item>\n\n\n            <Form.Item {...tailFormItemLayout}>\n                <Space size={8}>\n                    <Button type=\"primary\" htmlType=\"submit\">\n                        Register\n                    </Button>\n                    <Button htmlType=\"reset\">\n                        Reset\n                    </Button>\n                </Space>\n            </Form.Item>\n        </Form>\n    )\n}\n\nexport default RegisterForm;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/willwang98/Rice Homework/final-frontend-willwang1998-copy/src/component/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Card, Row, Col, DatePicker, Divider, Form, Input, message } from \"antd\";\nimport { formItemLayout, tailFormItemLayout } from \"../util/Layout\";\nimport moment from \"moment\";\nimport MyMediaMenu from \"./Menu\";\nimport EventBus from \"../util/EventBus\";\nimport { disabledDate, showBackendMessage } from \"../util/Functions\";\nimport AvatarUploader from \"./AvatarUploader\";\nimport PasswordSetup from \"./PasswordSetup\";\nimport GoogleLinking from \"./GoogleLinking\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [displayedName, setDisplayedName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [dob, setDob] = useState(\"\");\n  const [zipcode, setZipcode] = useState(\"\");\n  const [headline, setHeadline] = useState(\"\");\n\n  const load = async () => {\n    await fetch(\"http://localhost:4000/profile\", {\n      method: \"GET\",\n      credentials: \"include\"\n    }).then(res => {\n      if (res.ok) {\n        showBackendMessage().then();\n        return res.json();\n      } else {\n        throw res.statusText;\n      }\n    }).then(res => {\n      setUsername(res.username);\n      setDisplayedName(res.displayedName);\n      setEmail(res.email);\n      setPhone(res.phone);\n      setDob(res.dob);\n      setZipcode(res.zipcode);\n      setHeadline(res.headline);\n    }).catch(err => message.error(err, 1));\n  };\n\n  useEffect(() => load(), []);\n  EventBus.addEventListener(\"reload_profile\", load);\n  EventBus.addEventListener(\"clear_all_states\", () => {\n    setUsername(\"\");\n    setDisplayedName(\"\");\n    setEmail(\"\");\n    setPhone(\"\");\n    setDob(\"\");\n    setZipcode(\"\");\n    setHeadline(\"\");\n  });\n  EventBus.addEventListener(\"reload_all\", load);\n  const style = {\n    padding: '46px 0'\n  };\n\n  const onFinish = async values => {\n    await fetch(\"http://localhost:4000/profile\", {\n      method: \"PUT\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        displayed_name: values.displayed_name,\n        phone: values.phone,\n        email: values.email,\n        zipcode: values.zipcode,\n        headline: values.headline,\n        dob: values.dob\n      })\n    }).then(res => {\n      if (res.ok) {\n        showBackendMessage().then();\n        return res.json();\n      } else {\n        throw res.statusText;\n      }\n    }).then(() => {\n      EventBus.dispatchEvent(\"reload_min_profile\");\n      EventBus.dispatchEvent(\"reload_articles\");\n      message.success(\"Update successfully!\");\n    }).catch(err => message.error(err, 1));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MyMediaMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      gutter: {\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 0,\n        xl: 0\n      },\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 6,\n        xl: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 24,\n        sm: 24,\n        md: 24,\n        lg: 12,\n        xl: 12,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(AvatarUploader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form, { ...formItemLayout,\n            name: \"updateInformation\",\n            autoComplete: \"off\",\n            onFinish: onFinish,\n            initialValues: {\n              'displayName': displayedName,\n              'headline': headline,\n              'email': email,\n              'phone': phone,\n              'dob': moment(dob ? dob : \"\", 'MM/DD/YYYY'),\n              'zipcode': zipcode\n            },\n            children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"username\",\n              label: \"Username\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ant-form-text\",\n                children: username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"displayName\",\n              label: \"Display Name\",\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"headline\",\n              label: \"Headline\",\n              children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n                rows: 4\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"email\",\n              label: \"E-mail\",\n              rules: [{\n                type: 'email',\n                message: 'Please input your valid E-mail like a@b.co!'\n              }, {\n                required: true,\n                message: 'Please input your E-mail!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"phone\",\n              label: \"Phone Number\",\n              rules: [{\n                pattern: /^[0-9]{10}$/,\n                message: 'Please input your phone number like 1231231234!'\n              }, {\n                required: true,\n                message: 'Please input your phone number!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"dob\",\n              label: \"Date of Birth\",\n              rules: [{\n                required: true,\n                message: 'Please input your date of birth!'\n              }],\n              extra: \"Only individuals 18 years of age or older on the day of registration are allowed to register.\",\n              children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                format: 'MM/DD/YYYY',\n                style: {\n                  width: '100%'\n                },\n                disabledDate: disabledDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"zipcode\",\n              label: \"Zipcode\",\n              rules: [{\n                pattern: /^[0-9]{5}$/,\n                message: 'Please input your phone zipcode like 12345!'\n              }, {\n                required: true,\n                message: 'Please input your phone zipcode!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...tailFormItemLayout,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                children: \"Update\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Linking your Google Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(GoogleLinking, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(PasswordSetup, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 6,\n        xl: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Profile, \"wpF1SImptP3hU4OYH651VcpHPv8=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/final-frontend-willwang1998-copy/src/component/Profile.js"],"names":["React","useEffect","useState","Button","Card","Row","Col","DatePicker","Divider","Form","Input","message","formItemLayout","tailFormItemLayout","moment","MyMediaMenu","EventBus","disabledDate","showBackendMessage","AvatarUploader","PasswordSetup","GoogleLinking","Profile","username","setUsername","displayedName","setDisplayedName","email","setEmail","phone","setPhone","dob","setDob","zipcode","setZipcode","headline","setHeadline","load","fetch","method","credentials","then","res","ok","json","statusText","catch","err","error","addEventListener","style","padding","onFinish","values","headers","body","JSON","stringify","displayed_name","dispatchEvent","success","xs","sm","md","lg","xl","type","required","pattern","width"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {Button, Card, Row, Col, DatePicker, Divider, Form, Input, message} from \"antd\";\nimport {formItemLayout, tailFormItemLayout} from \"../util/Layout\";\nimport moment from \"moment\";\nimport MyMediaMenu from \"./Menu\";\nimport EventBus from \"../util/EventBus\";\nimport {disabledDate, showBackendMessage} from \"../util/Functions\";\nimport AvatarUploader from \"./AvatarUploader\";\nimport PasswordSetup from \"./PasswordSetup\";\nimport GoogleLinking from \"./GoogleLinking\";\n\n\nconst Profile = () => {\n    const [username, setUsername] = useState(\"\");\n    const [displayedName, setDisplayedName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [phone, setPhone] = useState(\"\");\n    const [dob, setDob] = useState(\"\");\n    const [zipcode, setZipcode] = useState(\"\");\n    const [headline, setHeadline] = useState(\"\");\n\n    const load = async () => {\n        await fetch(\"http://localhost:4000/profile\", {\n            method: \"GET\",\n            credentials: \"include\",\n        }).then(res => {\n            if (res.ok) {\n                showBackendMessage().then();\n                return res.json();\n            } else {\n                throw res.statusText;\n            }\n        }).then(res => {\n            setUsername(res.username);\n            setDisplayedName(res.displayedName);\n            setEmail(res.email);\n            setPhone(res.phone);\n            setDob(res.dob);\n            setZipcode(res.zipcode);\n            setHeadline(res.headline);\n        }).catch(err => message.error(err, 1));\n    };\n\n    useEffect(() => load(), []);\n    EventBus.addEventListener(\"reload_profile\", load);\n    EventBus.addEventListener(\"clear_all_states\", () => {\n        setUsername(\"\");\n        setDisplayedName(\"\");\n        setEmail(\"\");\n        setPhone(\"\");\n        setDob(\"\");\n        setZipcode(\"\");\n        setHeadline(\"\");\n    });\n    EventBus.addEventListener(\"reload_all\", load);\n\n    const style = {padding: '46px 0'};\n\n    const onFinish = async (values) => {\n        await fetch(\"http://localhost:4000/profile\", {\n            method: \"PUT\",\n            credentials: \"include\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                displayed_name: values.displayed_name,\n                phone: values.phone,\n                email: values.email,\n                zipcode: values.zipcode,\n                headline: values.headline,\n                dob: values.dob,\n            })\n        }).then(res => {\n            if (res.ok) {\n                showBackendMessage().then();\n                return res.json();\n            } else {\n                throw res.statusText;\n            }\n        }).then(() => {\n            EventBus.dispatchEvent(\"reload_min_profile\");\n            EventBus.dispatchEvent(\"reload_articles\");\n            message.success(\"Update successfully!\");\n        }).catch(err => message.error(err, 1));\n    };\n\n    return (\n        <>\n            <MyMediaMenu/>\n            <Row gutter={{xs: 0, sm: 0, md: 0, lg: 0, xl: 0}} style={style}>\n                <Col className=\"gutter-row\" xs={0} sm={0} md={0} lg={6} xl={6}/>\n                <Col className=\"gutter-row\" xs={24} sm={24} md={24} lg={12} xl={12}>\n                    <Card>\n                        <Divider orientation=\"left\">Avatar</Divider>\n                        <AvatarUploader/>\n\n                        <Divider orientation=\"left\">Information</Divider>\n                        <Form {...formItemLayout}\n                              name=\"updateInformation\"\n                              autoComplete=\"off\"\n                              onFinish={onFinish}\n                              initialValues={{\n                                  'displayName': displayedName,\n                                  'headline': headline,\n                                  'email': email,\n                                  'phone': phone,\n                                  'dob': moment(dob ? dob : \"\", 'MM/DD/YYYY'),\n                                  'zipcode': zipcode\n                              }}\n\n                        >\n                            <Form.Item name=\"username\"\n                                       label=\"Username\"\n                            >\n                                <span className=\"ant-form-text\">\n                                    {username}\n                                </span>\n                            </Form.Item>\n\n                            <Form.Item name=\"displayName\"\n                                       label=\"Display Name\"\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"headline\"\n                                       label=\"Headline\"\n                            >\n                                <Input.TextArea rows={4}/>\n                            </Form.Item>\n\n                            <Form.Item name=\"email\"\n                                       label=\"E-mail\"\n                                       rules={[\n                                           {\n                                               type: 'email',\n                                               message: 'Please input your valid E-mail like a@b.co!',\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your E-mail!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"phone\"\n                                       label=\"Phone Number\"\n                                       rules={[\n                                           {\n                                               pattern: /^[0-9]{10}$/,\n                                               message: 'Please input your phone number like 1231231234!'\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your phone number!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"dob\"\n                                       label=\"Date of Birth\"\n                                       rules={[\n                                           {\n                                               required: true,\n                                               message: 'Please input your date of birth!',\n                                           },\n                                       ]}\n                                       extra=\"Only individuals 18 years of age or older on the day of registration are allowed to register.\"\n                            >\n                                <DatePicker format={'MM/DD/YYYY'}\n                                            style={{width: '100%'}}\n                                            disabledDate={disabledDate}/>\n                            </Form.Item>\n\n                            <Form.Item name=\"zipcode\"\n                                       label=\"Zipcode\"\n                                       rules={[\n                                           {\n                                               pattern: /^[0-9]{5}$/,\n                                               message: 'Please input your phone zipcode like 12345!'\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your phone zipcode!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item {...tailFormItemLayout}>\n                                <Button type=\"primary\" htmlType=\"submit\">\n                                    Update\n                                </Button>\n                            </Form.Item>\n                        </Form>\n\n                        <Divider orientation=\"left\">Linking your Google Account</Divider>\n                        <GoogleLinking/>\n\n                        <Divider orientation=\"left\">Password</Divider>\n                        <PasswordSetup/>\n\n                    </Card>\n                </Col>\n                <Col className=\"gutter-row\" xs={0} sm={0} md={0} lg={6} xl={6}/>\n            </Row>\n        </>\n    )\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}
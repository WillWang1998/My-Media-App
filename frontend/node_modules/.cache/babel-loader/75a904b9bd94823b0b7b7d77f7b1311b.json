{"ast":null,"code":"var _jsxFileName = \"/Users/willwang98/Rice Homework/final-frontend-willwang1998-copy/src/component/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Card, Row, Col, DatePicker, Divider, Form, Input, message } from \"antd\";\nimport { formItemLayout, tailFormItemLayout } from \"../util/Layout\";\nimport moment from \"moment\";\nimport MyMediaMenu from \"./Menu\";\nimport EventBus from \"../util/EventBus\";\nimport { disabledDate, handleResponse, showError } from \"../util/Functions\";\nimport AvatarUploader from \"./AvatarUploader\";\nimport PasswordSetup from \"./PasswordSetup\";\nimport GoogleBinding from \"./GoogleBinding\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [displayedName, setDisplayedName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [dob, setDob] = useState(\"\");\n  const [zipcode, setZipcode] = useState(\"\");\n  const [headline, setHeadline] = useState(\"\");\n\n  const load = async () => {\n    await fetch(\"http://localhost:4000/profile\", {\n      method: \"GET\",\n      credentials: \"include\"\n    }).then(res => handleResponse(res)).then(res => {\n      setUsername(res.username);\n      setDisplayedName(res.displayedName);\n      setEmail(res.email);\n      setPhone(res.phone);\n      setDob(res.dob);\n      setZipcode(res.zipcode);\n      setHeadline(res.headline);\n    }).catch(err => showError(err));\n  };\n\n  useEffect(() => load, []);\n  EventBus.addEventListener(\"reload_profile\", load);\n  EventBus.addEventListener(\"clear_all_states\", () => {\n    setUsername(\"\");\n    setDisplayedName(\"\");\n    setEmail(\"\");\n    setPhone(\"\");\n    setDob(\"\");\n    setZipcode(\"\");\n    setHeadline(\"\");\n  });\n  EventBus.addEventListener(\"reload_all\", load);\n  const style = {\n    padding: '46px 0'\n  };\n\n  const onFinish = async values => {\n    await fetch(\"http://localhost:4000/profile\", {\n      method: \"PUT\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        displayed_name: values.displayed_name,\n        phone: values.phone,\n        email: values.email,\n        zipcode: values.zipcode,\n        headline: values.headline,\n        dob: values.dob\n      })\n    }).then(res => handleResponse(res)).then(() => {\n      EventBus.dispatchEvent(\"reload_min_profile\");\n      EventBus.dispatchEvent(\"reload_articles\");\n      message.success(\"Update successfully!\");\n    }).catch(err => showError(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MyMediaMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      gutter: {\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 0,\n        xl: 0\n      },\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 6,\n        xl: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 24,\n        sm: 24,\n        md: 24,\n        lg: 12,\n        xl: 12,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(AvatarUploader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form, { ...formItemLayout,\n            name: \"updateInformation\",\n            autoComplete: \"off\",\n            onFinish: onFinish,\n            initialValues: {\n              'displayName': displayedName,\n              'headline': headline,\n              'email': email,\n              'phone': phone,\n              'dob': moment(dob ? dob : \"\", 'MM/DD/YYYY'),\n              'zipcode': zipcode\n            },\n            children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"username\",\n              label: \"Username\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ant-form-text\",\n                children: username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"displayName\",\n              label: \"Display Name\",\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"headline\",\n              label: \"Headline\",\n              children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n                rows: 4\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"email\",\n              label: \"E-mail\",\n              rules: [{\n                type: 'email',\n                message: 'Please input your valid E-mail like a@b.co!'\n              }, {\n                required: true,\n                message: 'Please input your E-mail!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"phone\",\n              label: \"Phone Number\",\n              rules: [{\n                pattern: /^[0-9]{10}$/,\n                message: 'Please input your phone number like 1231231234!'\n              }, {\n                required: true,\n                message: 'Please input your phone number!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"dob\",\n              label: \"Date of Birth\",\n              rules: [{\n                required: true,\n                message: 'Please input your date of birth!'\n              }],\n              extra: \"Only individuals 18 years of age or older on the day of registration are allowed to register.\",\n              children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                format: 'MM/DD/YYYY',\n                style: {\n                  width: '100%'\n                },\n                disabledDate: disabledDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"zipcode\",\n              label: \"Zipcode\",\n              rules: [{\n                pattern: /^[0-9]{5}$/,\n                message: 'Please input your phone zipcode like 12345!'\n              }, {\n                required: true,\n                message: 'Please input your phone zipcode!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...tailFormItemLayout,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                children: \"Update\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Linking your Google Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(GoogleBinding, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(PasswordSetup, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 6,\n        xl: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Profile, \"wpF1SImptP3hU4OYH651VcpHPv8=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/final-frontend-willwang1998-copy/src/component/Profile.js"],"names":["React","useEffect","useState","Button","Card","Row","Col","DatePicker","Divider","Form","Input","message","formItemLayout","tailFormItemLayout","moment","MyMediaMenu","EventBus","disabledDate","handleResponse","showError","AvatarUploader","PasswordSetup","GoogleBinding","Profile","username","setUsername","displayedName","setDisplayedName","email","setEmail","phone","setPhone","dob","setDob","zipcode","setZipcode","headline","setHeadline","load","fetch","method","credentials","then","res","catch","err","addEventListener","style","padding","onFinish","values","headers","body","JSON","stringify","displayed_name","dispatchEvent","success","xs","sm","md","lg","xl","type","required","pattern","width"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {Button, Card, Row, Col, DatePicker, Divider, Form, Input, message} from \"antd\";\nimport {formItemLayout, tailFormItemLayout} from \"../util/Layout\";\nimport moment from \"moment\";\nimport MyMediaMenu from \"./Menu\";\nimport EventBus from \"../util/EventBus\";\nimport {disabledDate, handleResponse, showError} from \"../util/Functions\";\nimport AvatarUploader from \"./AvatarUploader\";\nimport PasswordSetup from \"./PasswordSetup\";\nimport GoogleBinding from \"./GoogleBinding\";\n\n\nconst Profile = () => {\n    const [username, setUsername] = useState(\"\");\n    const [displayedName, setDisplayedName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [phone, setPhone] = useState(\"\");\n    const [dob, setDob] = useState(\"\");\n    const [zipcode, setZipcode] = useState(\"\");\n    const [headline, setHeadline] = useState(\"\");\n\n    const load = async () => {\n        await fetch(\"http://localhost:4000/profile\", {\n            method: \"GET\",\n            credentials: \"include\",\n        }).then(res => handleResponse(res)).then(res => {\n            setUsername(res.username);\n            setDisplayedName(res.displayedName);\n            setEmail(res.email);\n            setPhone(res.phone);\n            setDob(res.dob);\n            setZipcode(res.zipcode);\n            setHeadline(res.headline);\n        }).catch(err => showError(err));\n    };\n\n    useEffect(() => load, []);\n    EventBus.addEventListener(\"reload_profile\", load);\n    EventBus.addEventListener(\"clear_all_states\", () => {\n        setUsername(\"\");\n        setDisplayedName(\"\");\n        setEmail(\"\");\n        setPhone(\"\");\n        setDob(\"\");\n        setZipcode(\"\");\n        setHeadline(\"\");\n    });\n    EventBus.addEventListener(\"reload_all\", load);\n\n    const style = {padding: '46px 0'};\n\n    const onFinish = async (values) => {\n        await fetch(\"http://localhost:4000/profile\", {\n            method: \"PUT\",\n            credentials: \"include\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                displayed_name: values.displayed_name,\n                phone: values.phone,\n                email: values.email,\n                zipcode: values.zipcode,\n                headline: values.headline,\n                dob: values.dob,\n            })\n        }).then(res => handleResponse(res)).then(() => {\n            EventBus.dispatchEvent(\"reload_min_profile\");\n            EventBus.dispatchEvent(\"reload_articles\");\n            message.success(\"Update successfully!\");\n        }).catch(err => showError(err));\n    };\n\n    return (\n        <>\n            <MyMediaMenu/>\n            <Row gutter={{xs: 0, sm: 0, md: 0, lg: 0, xl: 0}} style={style}>\n                <Col className=\"gutter-row\" xs={0} sm={0} md={0} lg={6} xl={6}/>\n                <Col className=\"gutter-row\" xs={24} sm={24} md={24} lg={12} xl={12}>\n                    <Card>\n                        <Divider orientation=\"left\">Avatar</Divider>\n                        <AvatarUploader/>\n\n                        <Divider orientation=\"left\">Information</Divider>\n                        <Form {...formItemLayout}\n                              name=\"updateInformation\"\n                              autoComplete=\"off\"\n                              onFinish={onFinish}\n                              initialValues={{\n                                  'displayName': displayedName,\n                                  'headline': headline,\n                                  'email': email,\n                                  'phone': phone,\n                                  'dob': moment(dob ? dob : \"\", 'MM/DD/YYYY'),\n                                  'zipcode': zipcode\n                              }}\n\n                        >\n                            <Form.Item name=\"username\"\n                                       label=\"Username\"\n                            >\n                                <span className=\"ant-form-text\">\n                                    {username}\n                                </span>\n                            </Form.Item>\n\n                            <Form.Item name=\"displayName\"\n                                       label=\"Display Name\"\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"headline\"\n                                       label=\"Headline\"\n                            >\n                                <Input.TextArea rows={4}/>\n                            </Form.Item>\n\n                            <Form.Item name=\"email\"\n                                       label=\"E-mail\"\n                                       rules={[\n                                           {\n                                               type: 'email',\n                                               message: 'Please input your valid E-mail like a@b.co!',\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your E-mail!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"phone\"\n                                       label=\"Phone Number\"\n                                       rules={[\n                                           {\n                                               pattern: /^[0-9]{10}$/,\n                                               message: 'Please input your phone number like 1231231234!'\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your phone number!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"dob\"\n                                       label=\"Date of Birth\"\n                                       rules={[\n                                           {\n                                               required: true,\n                                               message: 'Please input your date of birth!',\n                                           },\n                                       ]}\n                                       extra=\"Only individuals 18 years of age or older on the day of registration are allowed to register.\"\n                            >\n                                <DatePicker format={'MM/DD/YYYY'}\n                                            style={{width: '100%'}}\n                                            disabledDate={disabledDate}/>\n                            </Form.Item>\n\n                            <Form.Item name=\"zipcode\"\n                                       label=\"Zipcode\"\n                                       rules={[\n                                           {\n                                               pattern: /^[0-9]{5}$/,\n                                               message: 'Please input your phone zipcode like 12345!'\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your phone zipcode!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item {...tailFormItemLayout}>\n                                <Button type=\"primary\" htmlType=\"submit\">\n                                    Update\n                                </Button>\n                            </Form.Item>\n                        </Form>\n\n                        <Divider orientation=\"left\">Linking your Google Account</Divider>\n                        <GoogleBinding/>\n\n                        <Divider orientation=\"left\">Password</Divider>\n                        <PasswordSetup/>\n\n                    </Card>\n                </Col>\n                <Col className=\"gutter-row\" xs={0} sm={0} md={0} lg={6} xl={6}/>\n            </Row>\n        </>\n    )\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/willwang98/Rice Homework/final-frontend-willwang1998-copy/src/component/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Card, Row, Col, DatePicker, Divider, Form, Input, message } from \"antd\";\nimport { formItemLayout, tailFormItemLayout } from \"../util/Layout\";\nimport moment from \"moment\";\nimport MyMediaMenu from \"./Menu\";\nimport EventBus from \"../util/EventBus\";\nimport { disabledDate, showBackendMessage } from \"../util/Functions\";\nimport AvatarUploader from \"./AvatarUploader\";\nimport PasswordSetup from \"./PasswordSetup\";\nimport GoogleLinking from \"./GoogleLinking\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const [form] = Form.useForm();\n\n  const load = async () => {\n    await fetch(\"http://localhost:4000/profile\", {\n      method: \"GET\",\n      credentials: \"include\"\n    }).then(res => {\n      if (res.ok) {\n        showBackendMessage().then();\n        return res.json();\n      } else {\n        throw res.statusText;\n      }\n    }).then(res => {\n      form.setFieldsValue({\n        \"username\": res.username,\n        \"displayedName\": res.displayedName,\n        \"email\": res.email,\n        \"phone\": res.phone,\n        \"dob\": moment(res.dob),\n        \"zipcode\": res.zipcode,\n        \"headline\": res.headline\n      });\n    }).catch(err => message.error(err, 1));\n  };\n\n  useEffect(() => load(), []);\n  EventBus.addEventListener(\"reload_profile\", load);\n  EventBus.addEventListener(\"clear_all_states\", () => {\n    form.setFieldsValue({});\n  });\n  EventBus.addEventListener(\"reload_all\", load);\n  const style = {\n    padding: '46px 0'\n  };\n\n  const onFinish = async values => {\n    await fetch(\"http://localhost:4000/profile\", {\n      method: \"PUT\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        displayed_name: values.displayed_name,\n        phone: values.phone,\n        email: values.email,\n        zipcode: values.zipcode,\n        headline: values.headline,\n        dob: values.dob\n      })\n    }).then(res => {\n      if (res.ok) {\n        showBackendMessage().then();\n        return res.json();\n      } else {\n        throw res.statusText;\n      }\n    }).then(() => {\n      EventBus.dispatchEvent(\"reload_min_profile\");\n      EventBus.dispatchEvent(\"reload_articles\");\n      message.success(\"Update successfully!\");\n    }).catch(err => message.error(err, 1));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MyMediaMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      gutter: {\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 0,\n        xl: 0\n      },\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 6,\n        xl: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 24,\n        sm: 24,\n        md: 24,\n        lg: 12,\n        xl: 12,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(AvatarUploader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form, { ...formItemLayout,\n            form: form,\n            name: \"updateInformation\",\n            autoComplete: \"off\",\n            onFinish: onFinish,\n            children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"username\",\n              label: \"Username\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ant-form-text\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"displayedName\",\n              label: \"Displayed Name\",\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"headline\",\n              label: \"Headline\",\n              children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n                rows: 4\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"email\",\n              label: \"E-mail\",\n              rules: [{\n                type: 'email',\n                message: 'Please input your valid E-mail like a@b.co!'\n              }, {\n                required: true,\n                message: 'Please input your E-mail!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"phone\",\n              label: \"Phone Number\",\n              rules: [{\n                pattern: /^[0-9]{10}$/,\n                message: 'Please input your phone number like 1231231234!'\n              }, {\n                required: true,\n                message: 'Please input your phone number!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"dob\",\n              label: \"Date of Birth\",\n              rules: [{\n                required: true,\n                message: 'Please input your date of birth!'\n              }],\n              extra: \"Only individuals 18 years of age or older on the day of registration are allowed to register.\",\n              children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                format: 'MM/DD/YYYY',\n                style: {\n                  width: '100%'\n                },\n                disabledDate: disabledDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"zipcode\",\n              label: \"Zipcode\",\n              rules: [{\n                pattern: /^[0-9]{5}$/,\n                message: 'Please input your phone zipcode like 12345!'\n              }, {\n                required: true,\n                message: 'Please input your phone zipcode!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...tailFormItemLayout,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                children: \"Update\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Linking your Google Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(GoogleLinking, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(PasswordSetup, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"gutter-row\",\n        xs: 0,\n        sm: 0,\n        md: 0,\n        lg: 6,\n        xl: 6\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Profile, \"hm6PaQ/QYB/X6ENq1nmkdh1TV0k=\", false, function () {\n  return [Form.useForm];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/final-frontend-willwang1998-copy/src/component/Profile.js"],"names":["React","useEffect","useState","Button","Card","Row","Col","DatePicker","Divider","Form","Input","message","formItemLayout","tailFormItemLayout","moment","MyMediaMenu","EventBus","disabledDate","showBackendMessage","AvatarUploader","PasswordSetup","GoogleLinking","Profile","form","useForm","load","fetch","method","credentials","then","res","ok","json","statusText","setFieldsValue","username","displayedName","email","phone","dob","zipcode","headline","catch","err","error","addEventListener","style","padding","onFinish","values","headers","body","JSON","stringify","displayed_name","dispatchEvent","success","xs","sm","md","lg","xl","type","required","pattern","width"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,MAAR,EAAgBC,IAAhB,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,UAAhC,EAA4CC,OAA5C,EAAqDC,IAArD,EAA2DC,KAA3D,EAAkEC,OAAlE,QAAgF,MAAhF;AACA,SAAQC,cAAR,EAAwBC,kBAAxB,QAAiD,gBAAjD;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,WAAP,MAAwB,QAAxB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,SAAQC,YAAR,EAAsBC,kBAAtB,QAA+C,mBAA/C;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;;;;AAGA,MAAMC,OAAO,GAAG,MAAM;AAAA;;AAClB,QAAM,CAACC,IAAD,IAASd,IAAI,CAACe,OAAL,EAAf;;AAEA,QAAMC,IAAI,GAAG,YAAY;AACrB,UAAMC,KAAK,CAAC,+BAAD,EAAkC;AACzCC,MAAAA,MAAM,EAAE,KADiC;AAEzCC,MAAAA,WAAW,EAAE;AAF4B,KAAlC,CAAL,CAGHC,IAHG,CAGEC,GAAG,IAAI;AACX,UAAIA,GAAG,CAACC,EAAR,EAAY;AACRb,QAAAA,kBAAkB,GAAGW,IAArB;AACA,eAAOC,GAAG,CAACE,IAAJ,EAAP;AACH,OAHD,MAGO;AACH,cAAMF,GAAG,CAACG,UAAV;AACH;AACJ,KAVK,EAUHJ,IAVG,CAUEC,GAAG,IAAI;AACXP,MAAAA,IAAI,CAACW,cAAL,CAAoB;AAChB,oBAAYJ,GAAG,CAACK,QADA;AAEhB,yBAAiBL,GAAG,CAACM,aAFL;AAGhB,iBAASN,GAAG,CAACO,KAHG;AAIhB,iBAASP,GAAG,CAACQ,KAJG;AAKhB,eAAOxB,MAAM,CAACgB,GAAG,CAACS,GAAL,CALG;AAMhB,mBAAWT,GAAG,CAACU,OANC;AAOhB,oBAAYV,GAAG,CAACW;AAPA,OAApB;AASH,KApBK,EAoBHC,KApBG,CAoBGC,GAAG,IAAIhC,OAAO,CAACiC,KAAR,CAAcD,GAAd,EAAmB,CAAnB,CApBV,CAAN;AAqBH,GAtBD;;AAwBA1C,EAAAA,SAAS,CAAC,MAAMwB,IAAI,EAAX,EAAe,EAAf,CAAT;AACAT,EAAAA,QAAQ,CAAC6B,gBAAT,CAA0B,gBAA1B,EAA4CpB,IAA5C;AACAT,EAAAA,QAAQ,CAAC6B,gBAAT,CAA0B,kBAA1B,EAA8C,MAAM;AAChDtB,IAAAA,IAAI,CAACW,cAAL,CAAoB,EAApB;AACH,GAFD;AAGAlB,EAAAA,QAAQ,CAAC6B,gBAAT,CAA0B,YAA1B,EAAwCpB,IAAxC;AAEA,QAAMqB,KAAK,GAAG;AAACC,IAAAA,OAAO,EAAE;AAAV,GAAd;;AAEA,QAAMC,QAAQ,GAAG,MAAOC,MAAP,IAAkB;AAC/B,UAAMvB,KAAK,CAAC,+BAAD,EAAkC;AACzCC,MAAAA,MAAM,EAAE,KADiC;AAEzCC,MAAAA,WAAW,EAAE,SAF4B;AAGzCsB,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAHgC;AAMzCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,QAAAA,cAAc,EAAEL,MAAM,CAACK,cADN;AAEjBhB,QAAAA,KAAK,EAAEW,MAAM,CAACX,KAFG;AAGjBD,QAAAA,KAAK,EAAEY,MAAM,CAACZ,KAHG;AAIjBG,QAAAA,OAAO,EAAES,MAAM,CAACT,OAJC;AAKjBC,QAAAA,QAAQ,EAAEQ,MAAM,CAACR,QALA;AAMjBF,QAAAA,GAAG,EAAEU,MAAM,CAACV;AANK,OAAf;AANmC,KAAlC,CAAL,CAcHV,IAdG,CAcEC,GAAG,IAAI;AACX,UAAIA,GAAG,CAACC,EAAR,EAAY;AACRb,QAAAA,kBAAkB,GAAGW,IAArB;AACA,eAAOC,GAAG,CAACE,IAAJ,EAAP;AACH,OAHD,MAGO;AACH,cAAMF,GAAG,CAACG,UAAV;AACH;AACJ,KArBK,EAqBHJ,IArBG,CAqBE,MAAM;AACVb,MAAAA,QAAQ,CAACuC,aAAT,CAAuB,oBAAvB;AACAvC,MAAAA,QAAQ,CAACuC,aAAT,CAAuB,iBAAvB;AACA5C,MAAAA,OAAO,CAAC6C,OAAR,CAAgB,sBAAhB;AACH,KAzBK,EAyBHd,KAzBG,CAyBGC,GAAG,IAAIhC,OAAO,CAACiC,KAAR,CAAcD,GAAd,EAAmB,CAAnB,CAzBV,CAAN;AA0BH,GA3BD;;AA6BA,sBACI;AAAA,4BACI,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,GAAD;AAAK,MAAA,MAAM,EAAE;AAACc,QAAAA,EAAE,EAAE,CAAL;AAAQC,QAAAA,EAAE,EAAE,CAAZ;AAAeC,QAAAA,EAAE,EAAE,CAAnB;AAAsBC,QAAAA,EAAE,EAAE,CAA1B;AAA6BC,QAAAA,EAAE,EAAE;AAAjC,OAAb;AAAkD,MAAA,KAAK,EAAEf,KAAzD;AAAA,8BACI,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC,YAAf;AAA4B,QAAA,EAAE,EAAE,CAAhC;AAAmC,QAAA,EAAE,EAAE,CAAvC;AAA0C,QAAA,EAAE,EAAE,CAA9C;AAAiD,QAAA,EAAE,EAAE,CAArD;AAAwD,QAAA,EAAE,EAAE;AAA5D;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC,YAAf;AAA4B,QAAA,EAAE,EAAE,EAAhC;AAAoC,QAAA,EAAE,EAAE,EAAxC;AAA4C,QAAA,EAAE,EAAE,EAAhD;AAAoD,QAAA,EAAE,EAAE,EAAxD;AAA4D,QAAA,EAAE,EAAE,EAAhE;AAAA,+BACI,QAAC,IAAD;AAAA,kCACI,QAAC,OAAD;AAAS,YAAA,WAAW,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAII,QAAC,OAAD;AAAS,YAAA,WAAW,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAKI,QAAC,IAAD,OAAUlC,cAAV;AACI,YAAA,IAAI,EAAEW,IADV;AAEI,YAAA,IAAI,EAAC,mBAFT;AAGI,YAAA,YAAY,EAAC,KAHjB;AAII,YAAA,QAAQ,EAAEyB,QAJd;AAAA,oCAMI,QAAC,IAAD,CAAM,IAAN;AAAW,cAAA,IAAI,EAAC,UAAhB;AACW,cAAA,KAAK,EAAC,UADjB;AAAA,qCAGI;AAAM,gBAAA,SAAS,EAAC;AAAhB;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,oBANJ,eAYI,QAAC,IAAD,CAAM,IAAN;AAAW,cAAA,IAAI,EAAC,eAAhB;AACW,cAAA,KAAK,EAAC,gBADjB;AAAA,qCAGI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,oBAZJ,eAkBI,QAAC,IAAD,CAAM,IAAN;AAAW,cAAA,IAAI,EAAC,UAAhB;AACW,cAAA,KAAK,EAAC,UADjB;AAAA,qCAGI,QAAC,KAAD,CAAO,QAAP;AAAgB,gBAAA,IAAI,EAAE;AAAtB;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,oBAlBJ,eAwBI,QAAC,IAAD,CAAM,IAAN;AAAW,cAAA,IAAI,EAAC,OAAhB;AACW,cAAA,KAAK,EAAC,QADjB;AAEW,cAAA,KAAK,EAAE,CACH;AACIc,gBAAAA,IAAI,EAAE,OADV;AAEInD,gBAAAA,OAAO,EAAE;AAFb,eADG,EAKH;AACIoD,gBAAAA,QAAQ,EAAE,IADd;AAEIpD,gBAAAA,OAAO,EAAE;AAFb,eALG,CAFlB;AAAA,qCAaI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAbJ;AAAA;AAAA;AAAA;AAAA,oBAxBJ,eAwCI,QAAC,IAAD,CAAM,IAAN;AAAW,cAAA,IAAI,EAAC,OAAhB;AACW,cAAA,KAAK,EAAC,cADjB;AAEW,cAAA,KAAK,EAAE,CACH;AACIqD,gBAAAA,OAAO,EAAE,aADb;AAEIrD,gBAAAA,OAAO,EAAE;AAFb,eADG,EAKH;AACIoD,gBAAAA,QAAQ,EAAE,IADd;AAEIpD,gBAAAA,OAAO,EAAE;AAFb,eALG,CAFlB;AAAA,qCAaI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAbJ;AAAA;AAAA;AAAA;AAAA,oBAxCJ,eAwDI,QAAC,IAAD,CAAM,IAAN;AAAW,cAAA,IAAI,EAAC,KAAhB;AACW,cAAA,KAAK,EAAC,eADjB;AAEW,cAAA,KAAK,EAAE,CACH;AACIoD,gBAAAA,QAAQ,EAAE,IADd;AAEIpD,gBAAAA,OAAO,EAAE;AAFb,eADG,CAFlB;AAQW,cAAA,KAAK,EAAC,+FARjB;AAAA,qCAUI,QAAC,UAAD;AAAY,gBAAA,MAAM,EAAE,YAApB;AACY,gBAAA,KAAK,EAAE;AAACsD,kBAAAA,KAAK,EAAE;AAAR,iBADnB;AAEY,gBAAA,YAAY,EAAEhD;AAF1B;AAAA;AAAA;AAAA;AAAA;AAVJ;AAAA;AAAA;AAAA;AAAA,oBAxDJ,eAuEI,QAAC,IAAD,CAAM,IAAN;AAAW,cAAA,IAAI,EAAC,SAAhB;AACW,cAAA,KAAK,EAAC,SADjB;AAEW,cAAA,KAAK,EAAE,CACH;AACI+C,gBAAAA,OAAO,EAAE,YADb;AAEIrD,gBAAAA,OAAO,EAAE;AAFb,eADG,EAKH;AACIoD,gBAAAA,QAAQ,EAAE,IADd;AAEIpD,gBAAAA,OAAO,EAAE;AAFb,eALG,CAFlB;AAAA,qCAaI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAbJ;AAAA;AAAA;AAAA;AAAA,oBAvEJ,eAuFI,QAAC,IAAD,CAAM,IAAN,OAAeE,kBAAf;AAAA,qCACI,QAAC,MAAD;AAAQ,gBAAA,IAAI,EAAC,SAAb;AAAuB,gBAAA,QAAQ,EAAC,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAvFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ,eAmGI,QAAC,OAAD;AAAS,YAAA,WAAW,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAnGJ,eAoGI,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,kBApGJ,eAsGI,QAAC,OAAD;AAAS,YAAA,WAAW,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAtGJ,eAuGI,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,kBAvGJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ,eA8GI,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC,YAAf;AAA4B,QAAA,EAAE,EAAE,CAAhC;AAAmC,QAAA,EAAE,EAAE,CAAvC;AAA0C,QAAA,EAAE,EAAE,CAA9C;AAAiD,QAAA,EAAE,EAAE,CAArD;AAAwD,QAAA,EAAE,EAAE;AAA5D;AAAA;AAAA;AAAA;AAAA,cA9GJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ;AAAA,kBADJ;AAqHH,CAtLD;;GAAMS,O;UACab,IAAI,CAACe,O;;;KADlBF,O;AAwLN,eAAeA,OAAf","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {Button, Card, Row, Col, DatePicker, Divider, Form, Input, message} from \"antd\";\nimport {formItemLayout, tailFormItemLayout} from \"../util/Layout\";\nimport moment from \"moment\";\nimport MyMediaMenu from \"./Menu\";\nimport EventBus from \"../util/EventBus\";\nimport {disabledDate, showBackendMessage} from \"../util/Functions\";\nimport AvatarUploader from \"./AvatarUploader\";\nimport PasswordSetup from \"./PasswordSetup\";\nimport GoogleLinking from \"./GoogleLinking\";\n\n\nconst Profile = () => {\n    const [form] = Form.useForm();\n\n    const load = async () => {\n        await fetch(\"http://localhost:4000/profile\", {\n            method: \"GET\",\n            credentials: \"include\",\n        }).then(res => {\n            if (res.ok) {\n                showBackendMessage().then();\n                return res.json();\n            } else {\n                throw res.statusText;\n            }\n        }).then(res => {\n            form.setFieldsValue({\n                \"username\": res.username,\n                \"displayedName\": res.displayedName,\n                \"email\": res.email,\n                \"phone\": res.phone,\n                \"dob\": moment(res.dob),\n                \"zipcode\": res.zipcode,\n                \"headline\": res.headline,\n            })\n        }).catch(err => message.error(err, 1));\n    };\n\n    useEffect(() => load(), []);\n    EventBus.addEventListener(\"reload_profile\", load);\n    EventBus.addEventListener(\"clear_all_states\", () => {\n        form.setFieldsValue({});\n    });\n    EventBus.addEventListener(\"reload_all\", load);\n\n    const style = {padding: '46px 0'};\n\n    const onFinish = async (values) => {\n        await fetch(\"http://localhost:4000/profile\", {\n            method: \"PUT\",\n            credentials: \"include\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                displayed_name: values.displayed_name,\n                phone: values.phone,\n                email: values.email,\n                zipcode: values.zipcode,\n                headline: values.headline,\n                dob: values.dob,\n            })\n        }).then(res => {\n            if (res.ok) {\n                showBackendMessage().then();\n                return res.json();\n            } else {\n                throw res.statusText;\n            }\n        }).then(() => {\n            EventBus.dispatchEvent(\"reload_min_profile\");\n            EventBus.dispatchEvent(\"reload_articles\");\n            message.success(\"Update successfully!\");\n        }).catch(err => message.error(err, 1));\n    };\n\n    return (\n        <>\n            <MyMediaMenu/>\n            <Row gutter={{xs: 0, sm: 0, md: 0, lg: 0, xl: 0}} style={style}>\n                <Col className=\"gutter-row\" xs={0} sm={0} md={0} lg={6} xl={6}/>\n                <Col className=\"gutter-row\" xs={24} sm={24} md={24} lg={12} xl={12}>\n                    <Card>\n                        <Divider orientation=\"left\">Avatar</Divider>\n                        <AvatarUploader/>\n\n                        <Divider orientation=\"left\">Information</Divider>\n                        <Form {...formItemLayout}\n                            form={form}\n                            name=\"updateInformation\"\n                            autoComplete=\"off\"\n                            onFinish={onFinish}\n                        >\n                            <Form.Item name=\"username\"\n                                       label=\"Username\"\n                            >\n                                <span className=\"ant-form-text\" />\n                            </Form.Item>\n\n                            <Form.Item name=\"displayedName\"\n                                       label=\"Displayed Name\"\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"headline\"\n                                       label=\"Headline\"\n                            >\n                                <Input.TextArea rows={4}/>\n                            </Form.Item>\n\n                            <Form.Item name=\"email\"\n                                       label=\"E-mail\"\n                                       rules={[\n                                           {\n                                               type: 'email',\n                                               message: 'Please input your valid E-mail like a@b.co!',\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your E-mail!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"phone\"\n                                       label=\"Phone Number\"\n                                       rules={[\n                                           {\n                                               pattern: /^[0-9]{10}$/,\n                                               message: 'Please input your phone number like 1231231234!'\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your phone number!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item name=\"dob\"\n                                       label=\"Date of Birth\"\n                                       rules={[\n                                           {\n                                               required: true,\n                                               message: 'Please input your date of birth!',\n                                           },\n                                       ]}\n                                       extra=\"Only individuals 18 years of age or older on the day of registration are allowed to register.\"\n                            >\n                                <DatePicker format={'MM/DD/YYYY'}\n                                            style={{width: '100%'}}\n                                            disabledDate={disabledDate}/>\n                            </Form.Item>\n\n                            <Form.Item name=\"zipcode\"\n                                       label=\"Zipcode\"\n                                       rules={[\n                                           {\n                                               pattern: /^[0-9]{5}$/,\n                                               message: 'Please input your phone zipcode like 12345!'\n                                           },\n                                           {\n                                               required: true,\n                                               message: 'Please input your phone zipcode!',\n                                           },\n                                       ]}\n                            >\n                                <Input/>\n                            </Form.Item>\n\n                            <Form.Item {...tailFormItemLayout}>\n                                <Button type=\"primary\" htmlType=\"submit\">\n                                    Update\n                                </Button>\n                            </Form.Item>\n                        </Form>\n\n                        <Divider orientation=\"left\">Linking your Google Account</Divider>\n                        <GoogleLinking/>\n\n                        <Divider orientation=\"left\">Password</Divider>\n                        <PasswordSetup/>\n\n                    </Card>\n                </Col>\n                <Col className=\"gutter-row\" xs={0} sm={0} md={0} lg={6} xl={6}/>\n            </Row>\n        </>\n    )\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}
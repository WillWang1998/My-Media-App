{"ast":null,"code":"import _objectSpread from\"/Users/willwang98/Rice Homework/hw6-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{LOG_IN,REGISTER,LOG_OUT,POST,SEARCH,ADD_NEW_FOLLOWING,UNFOLLOW,UPDATE_INFO,UPDATE_PASSWORD,CHANGE_TAB,UPDATE_STATUS}from\"./actions\";import{addPost,addUser,checkUserNamePassword,getFollowingsAndSelfPosts,getNewPostID,getNewUserID,initialState,updateUser,userNameIdMap,userNameInfoMap,userNamePasswordMap}from\"./fake_backend\";export function myMediaApp(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case LOG_IN:{var userName=action.values.userName;var password=action.values.password;if(checkUserNamePassword(userName,password)){window.localStorage.setItem(\"userName\",userName);var info=userNameInfoMap.get(userName);return _objectSpread(_objectSpread({},state),{},{isAuthenticated:true,logInOrRegisterMessage:\"Successful login!\",id:userNameIdMap[userName],menuState:\"home\",userName:userName,avatar:info.avatar,email:info.email,phone:info.phone,DOB:info.DOB,zipcode:info.zipcode,displayName:info.displayName,followings:info.followings,status:info.status,selectedPosts:getFollowingsAndSelfPosts(userName,info.followings)});}else{return _objectSpread(_objectSpread({},state),{},{logInOrRegisterMessage:\"Please check your username and password!\"});}}case REGISTER:{var _userName=action.values.userName;// TODO: backend checkers\nif(userNamePasswordMap.has(_userName)){return _objectSpread(_objectSpread({},state),{},{logInOrRegisterMessage:\"This username is in used!\"});}else{window.localStorage.setItem(\"userName\",_userName);addUser(_userName,action.values.email,action.values.phone,action.values.DOB,action.values.zipcode,action.values.displayName,action.values.password);var _info=userNameInfoMap.get(_userName);return _objectSpread(_objectSpread({},state),{},{isAuthenticated:true,logInOrRegisterMessage:\"Successful register!\",menuState:\"home\",id:getNewUserID(),userName:_userName,avatar:_info.avatar,email:_info.email,phone:_info.phone,DOB:_info.DOB,zipcode:_info.zipcode,displayName:_info.displayName,followings:_info.followings,status:_info.status,selectedPosts:getFollowingsAndSelfPosts(_userName,_info.followings)});}}case LOG_OUT:{window.localStorage.removeItem(\"userName\");return _objectSpread(_objectSpread({},state),{},{isAuthenticated:false,logInOrRegisterMessage:\"Successful logout!\",menuState:\"logout\",id:null,userName:null,avatar:null,email:null,phone:null,DOB:null,zipcode:null,displayName:null,followings:[],status:null,searchWord:\"\",selectedPosts:[]});}case CHANGE_TAB:{return _objectSpread(_objectSpread({},state),{},{menuState:action.values.menuState});}case UPDATE_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.values.status});}case POST:{addPost({timestamp:new Date().valueOf(),id:getNewPostID(),userName:state.userName,title:action.values.title,body:action.values.body,pictures:action.values.pictures,avatar:state.avatar,comments:[]});var newSelectedPosts=getFollowingsAndSelfPosts(state.userName,state.followings);return _objectSpread(_objectSpread({},state),{},{searchWord:\"\",selectedPosts:newSelectedPosts});}case SEARCH:{var _newSelectedPosts=getFollowingsAndSelfPosts(state.userName,state.followings,action.values.searchWord);return _objectSpread(_objectSpread({},state),{},{searchWord:action.values.searchWord,selectedPosts:_newSelectedPosts});}case ADD_NEW_FOLLOWING:{if(!state.followings.some(function(following){return following.userName===action.values.userName;})&&userNamePasswordMap.has(action.values.userName)&&action.values.userName!==state.userName){var newFollowings=[{userName:action.values.userName,avatar:userNameInfoMap.get(action.values.userName).avatar,status:userNameInfoMap.get(action.values.userName).status}];state.followings.forEach(function(following){newFollowings.push(following);});var temp=userNameInfoMap.get(state.userName);temp.followings=newFollowings;userNameInfoMap.set(state.userName,temp);var _newSelectedPosts2=getFollowingsAndSelfPosts(state.userName,newFollowings);return _objectSpread(_objectSpread({},state),{},{followings:newFollowings,selectedPosts:_newSelectedPosts2});}else{return _objectSpread(_objectSpread({},state),{},{addFollowingMessage:\"This user doesn't exist.\"});}}case UNFOLLOW:{var _newFollowings=[];var i=0;for(;i<state.followings.length;++i){if(state.followings[i].userName!==action.values.userName){_newFollowings.push(state.followings[i]);}}var _temp=userNameInfoMap.get(state.userName);_temp.followings=_newFollowings;userNameInfoMap.set(state.userName,_temp);var _newSelectedPosts3=getFollowingsAndSelfPosts(state.userName,_newFollowings);return _objectSpread(_objectSpread({},state),{},{followings:_newFollowings,selectedPosts:_newSelectedPosts3});}case UPDATE_INFO:{updateUser(state.userName,action.values);return _objectSpread(_objectSpread({},state),{},{isUpdateSuccessful:true,updateProfileMessage:\"Successful update!\",email:action.values.email,status:action.values.status,phone:action.values.phone,DOB:action.values.DOB,zipcode:action.values.zipcode,displayName:action.values.displayName});}case UPDATE_PASSWORD:{if(userNamePasswordMap.get(state.userName)!==action.values.curPassword){return _objectSpread(_objectSpread({},state),{},{isUpdateSuccessful:false,updateProfileMessage:\"Please check your current password!\"});}else{userNamePasswordMap.set(state.userName,action.values.newPassword);return _objectSpread(_objectSpread({},state),{},{isUpdateSuccessful:true,updateProfileMessage:\"Successful update!\"});}}default:{return state;}}}","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/hw6-frontend-WillWang1998/src/reducers.js"],"names":["LOG_IN","REGISTER","LOG_OUT","POST","SEARCH","ADD_NEW_FOLLOWING","UNFOLLOW","UPDATE_INFO","UPDATE_PASSWORD","CHANGE_TAB","UPDATE_STATUS","addPost","addUser","checkUserNamePassword","getFollowingsAndSelfPosts","getNewPostID","getNewUserID","initialState","updateUser","userNameIdMap","userNameInfoMap","userNamePasswordMap","myMediaApp","state","action","type","userName","values","password","window","localStorage","setItem","info","get","isAuthenticated","logInOrRegisterMessage","id","menuState","avatar","email","phone","DOB","zipcode","displayName","followings","status","selectedPosts","has","removeItem","searchWord","timestamp","Date","valueOf","title","body","pictures","comments","newSelectedPosts","some","following","newFollowings","forEach","push","temp","set","addFollowingMessage","i","length","isUpdateSuccessful","updateProfileMessage","curPassword","newPassword"],"mappings":"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","sourcesContent":["import {\n    LOG_IN,\n    REGISTER,\n    LOG_OUT,\n    POST,\n    SEARCH,\n    ADD_NEW_FOLLOWING,\n    UNFOLLOW,\n    UPDATE_INFO,\n    UPDATE_PASSWORD,\n    CHANGE_TAB,\n    UPDATE_STATUS\n} from \"./actions\";\nimport {\n    addPost,\n    addUser,\n    checkUserNamePassword,\n    getFollowingsAndSelfPosts, getNewPostID, getNewUserID,\n    initialState,\n    updateUser,\n    userNameIdMap,\n    userNameInfoMap, userNamePasswordMap\n} from \"./fake_backend\";\n\nexport function myMediaApp(state = initialState, action) {\n    switch (action.type) {\n        case LOG_IN: {\n            let userName = action.values.userName;\n            let password = action.values.password;\n            if (checkUserNamePassword(userName, password)) {\n                window.localStorage.setItem(\"userName\", userName);\n                let info = userNameInfoMap.get(userName);\n                return {\n                    ...state,\n                    isAuthenticated: true,\n                    logInOrRegisterMessage: \"Successful login!\",\n                    id: userNameIdMap[userName],\n                    menuState: \"home\",\n                    userName: userName,\n                    avatar: info.avatar,\n                    email: info.email,\n                    phone: info.phone,\n                    DOB: info.DOB,\n                    zipcode: info.zipcode,\n                    displayName: info.displayName,\n                    followings: info.followings,\n                    status: info.status,\n                    selectedPosts: getFollowingsAndSelfPosts(userName, info.followings)\n                }\n            } else {\n                return {\n                    ...state,\n                    logInOrRegisterMessage: \"Please check your username and password!\",\n                };\n            }\n        }\n        case REGISTER: {\n            let userName = action.values.userName;\n            // TODO: backend checkers\n            if (userNamePasswordMap.has(userName)) {\n                return {\n                    ...state,\n                    logInOrRegisterMessage: \"This username is in used!\",\n                };\n            } else {\n                window.localStorage.setItem(\"userName\", userName);\n                addUser(userName,\n                    action.values.email,\n                    action.values.phone,\n                    action.values.DOB,\n                    action.values.zipcode,\n                    action.values.displayName,\n                    action.values.password);\n                let info = userNameInfoMap.get(userName);\n                return {\n                    ...state,\n                    isAuthenticated: true,\n                    logInOrRegisterMessage: \"Successful register!\",\n                    menuState: \"home\",\n                    id: getNewUserID(),\n                    userName: userName,\n                    avatar: info.avatar,\n                    email: info.email,\n                    phone: info.phone,\n                    DOB: info.DOB,\n                    zipcode: info.zipcode,\n                    displayName: info.displayName,\n                    followings: info.followings,\n                    status: info.status,\n                    selectedPosts: getFollowingsAndSelfPosts(userName, info.followings)\n                }\n            }\n        }\n        case LOG_OUT: {\n            window.localStorage.removeItem(\"userName\");\n            return {\n                ...state,\n                isAuthenticated: false,\n                logInOrRegisterMessage: \"Successful logout!\",\n                menuState: \"logout\",\n                id: null,\n                userName: null,\n                avatar: null,\n                email: null,\n                phone: null,\n                DOB: null,\n                zipcode: null,\n                displayName: null,\n                followings: [],\n                status: null,\n                searchWord: \"\",\n                selectedPosts: []\n            }\n        }\n        case CHANGE_TAB: {\n            return {\n                ...state,\n                menuState: action.values.menuState,\n            }\n        }\n        case UPDATE_STATUS: {\n            return {\n                ...state,\n                status: action.values.status,\n            }\n        }\n        case POST: {\n            addPost({\n                timestamp: (new Date()).valueOf(),\n                id: getNewPostID(),\n                userName: state.userName,\n                title: action.values.title,\n                body: action.values.body,\n                pictures: action.values.pictures,\n                avatar: state.avatar,\n                comments: [],\n            });\n\n            let newSelectedPosts = getFollowingsAndSelfPosts(state.userName, state.followings);\n            return {\n                ...state,\n                searchWord: \"\",\n                selectedPosts: newSelectedPosts,\n            }\n        }\n        case SEARCH: {\n            let newSelectedPosts = getFollowingsAndSelfPosts(state.userName, state.followings, action.values.searchWord);\n            return {\n                ...state,\n                searchWord: action.values.searchWord,\n                selectedPosts: newSelectedPosts,\n            }\n        }\n        case ADD_NEW_FOLLOWING: {\n            if (!state.followings.some(\n                function (following) {\n                    return following.userName === action.values.userName;\n                }\n            ) && userNamePasswordMap.has(action.values.userName) && action.values.userName !== state.userName) {\n                let newFollowings = [{\n                    userName: action.values.userName,\n                    avatar: userNameInfoMap.get(action.values.userName).avatar,\n                    status: userNameInfoMap.get(action.values.userName).status,\n                }];\n                state.followings.forEach((following) => {\n                    newFollowings.push(following)\n                });\n                let temp = userNameInfoMap.get(state.userName);\n                temp.followings = newFollowings;\n                userNameInfoMap.set(state.userName, temp);\n                let newSelectedPosts = getFollowingsAndSelfPosts(state.userName, newFollowings);\n                return {\n                    ...state,\n                    followings: newFollowings,\n                    selectedPosts: newSelectedPosts,\n                }\n            } else {\n                return {\n                    ...state,\n                    addFollowingMessage: \"This user doesn't exist.\"\n                };\n            }\n        }\n        case UNFOLLOW: {\n            let newFollowings = [];\n            let i = 0;\n            for (; i < state.followings.length; ++i) {\n                if (state.followings[i].userName !== action.values.userName) {\n                    newFollowings.push(state.followings[i]);\n                }\n            }\n            let temp = userNameInfoMap.get(state.userName);\n            temp.followings = newFollowings;\n            userNameInfoMap.set(state.userName, temp);\n            let newSelectedPosts = getFollowingsAndSelfPosts(state.userName, newFollowings);\n            return {\n                ...state,\n                followings: newFollowings,\n                selectedPosts: newSelectedPosts\n            }\n        }\n        case UPDATE_INFO: {\n            updateUser(state.userName, action.values);\n            return {\n                ...state,\n                isUpdateSuccessful: true,\n                updateProfileMessage: \"Successful update!\",\n                email: action.values.email,\n                status: action.values.status,\n                phone: action.values.phone,\n                DOB: action.values.DOB,\n                zipcode: action.values.zipcode,\n                displayName: action.values.displayName,\n            }\n        }\n        case UPDATE_PASSWORD: {\n            if (userNamePasswordMap.get(state.userName) !== action.values.curPassword) {\n                return {\n                    ...state,\n                    isUpdateSuccessful: false,\n                    updateProfileMessage: \"Please check your current password!\"\n                }\n            } else {\n                userNamePasswordMap.set(state.userName, action.values.newPassword);\n                return {\n                    ...state,\n                    isUpdateSuccessful: true,\n                    updateProfileMessage: \"Successful update!\",\n                };\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}
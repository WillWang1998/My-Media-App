{"ast":null,"code":"import _regeneratorRuntime from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/willwang98/Rice Homework/final-frontend-WillWang1998/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{Menu,ConfigProvider,message}from'antd';import{HomeOutlined,UserOutlined,LogoutOutlined}from'@ant-design/icons';import Cookies from\"js-cookie\";import{useHistory,useLocation}from\"react-router-dom\";import Sticky from'react-stickynode';import EventBus from\"../util/EventBus\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyMediaMenu=function MyMediaMenu(){var location=useLocation();var history=useHistory();var curPath=location.pathname.slice(1);message.config({rtl:false});var onSelect=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(info){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(curPath!==info.key)){_context.next=10;break;}if(!(info.key===\"logout\")){_context.next=9;break;}_context.next=4;return fetch(\"http://localhost:4000/logout\",{method:\"PUT\",credentials:\"include\"});case 4:Cookies.remove(\"isLoggedIn\");history.push({pathname:\"/landing\"});EventBus.dispatchEvent(\"clear_all_states\");_context.next=10;break;case 9:if(info.key===\"profile\"){history.push({pathname:\"/profile\"});}else{history.push({pathname:\"/home\"});}case 10:case\"end\":return _context.stop();}}},_callee);}));return function onSelect(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Sticky,{innerZ:\"1\",children:/*#__PURE__*/_jsx(ConfigProvider,{direction:\"rtl\",children:/*#__PURE__*/_jsxs(Menu,{theme:\"dark\",mode:\"horizontal\",onSelect:onSelect,selectedKeys:[curPath],children:[/*#__PURE__*/_jsxs(Menu.Item,{children:[/*#__PURE__*/_jsx(LogoutOutlined,{}),\"Log Out\"]},\"logout\"),/*#__PURE__*/_jsxs(Menu.Item,{children:[/*#__PURE__*/_jsx(UserOutlined,{}),\"Profile\"]},\"profile\"),/*#__PURE__*/_jsxs(Menu.Item,{children:[/*#__PURE__*/_jsx(HomeOutlined,{}),\"Home\"]},\"home\")]})})});};export default MyMediaMenu;","map":{"version":3,"sources":["/Users/willwang98/Rice Homework/final-frontend-WillWang1998/src/component/Menu.js"],"names":["React","Menu","ConfigProvider","message","HomeOutlined","UserOutlined","LogoutOutlined","Cookies","useHistory","useLocation","Sticky","EventBus","MyMediaMenu","location","history","curPath","pathname","slice","config","rtl","onSelect","info","key","fetch","method","credentials","remove","push","dispatchEvent"],"mappings":"iWAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,IAAR,CAAcC,cAAd,CAA8BC,OAA9B,KAA4C,MAA5C,CACA,OACIC,YADJ,CAEIC,YAFJ,CAGIC,cAHJ,KAIO,mBAJP,CAKA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAAQC,UAAR,CAAoBC,WAApB,KAAsC,kBAAtC,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,CAAAA,OAAO,CAAGN,UAAU,EAA1B,CACA,GAAMO,CAAAA,OAAO,CAAGF,QAAQ,CAACG,QAAT,CAAkBC,KAAlB,CAAwB,CAAxB,CAAhB,CAEAd,OAAO,CAACe,MAAR,CAAe,CACXC,GAAG,CAAE,KADM,CAAf,EAIA,GAAMC,CAAAA,QAAQ,0FAAG,iBAAOC,IAAP,uHACTN,OAAO,GAAKM,IAAI,CAACC,GADR,gCAELD,IAAI,CAACC,GAAL,GAAa,QAFR,gDAGCC,CAAAA,KAAK,CAAC,8BAAD,CAAiC,CACxCC,MAAM,CAAE,KADgC,CAExCC,WAAW,CAAE,SAF2B,CAAjC,CAHN,QAOLlB,OAAO,CAACmB,MAAR,CAAe,YAAf,EACAZ,OAAO,CAACa,IAAR,CAAa,CACTX,QAAQ,CAAE,UADD,CAAb,EAGAL,QAAQ,CAACiB,aAAT,CAAuB,kBAAvB,EAXK,8BAYF,GAAIP,IAAI,CAACC,GAAL,GAAa,SAAjB,CAA4B,CAC/BR,OAAO,CAACa,IAAR,CAAa,CACTX,QAAQ,CAAE,UADD,CAAb,EAGH,CAJM,IAIA,CACHF,OAAO,CAACa,IAAR,CAAa,CACTX,QAAQ,CAAE,OADD,CAAb,EAGH,CApBQ,uDAAH,kBAARI,CAAAA,QAAQ,4CAAd,CAwBA,mBACI,KAAC,MAAD,EAAQ,MAAM,CAAC,GAAf,uBACI,KAAC,cAAD,EAAgB,SAAS,CAAC,KAA1B,uBACI,MAAC,IAAD,EACI,KAAK,CAAC,MADV,CAEI,IAAI,CAAC,YAFT,CAGI,QAAQ,CAAEA,QAHd,CAII,YAAY,CAAE,CAACL,OAAD,CAJlB,wBAKI,MAAC,IAAD,CAAM,IAAN,yBACI,KAAC,cAAD,IADJ,aAAe,QAAf,CALJ,cAQI,MAAC,IAAD,CAAM,IAAN,yBACI,KAAC,YAAD,IADJ,aAAe,SAAf,CARJ,cAWI,MAAC,IAAD,CAAM,IAAN,yBACI,KAAC,YAAD,IADJ,UAAe,MAAf,CAXJ,GADJ,EADJ,EADJ,CAqBH,CAtDD,CAwDA,cAAeH,CAAAA,WAAf","sourcesContent":["import React from \"react\";\nimport {Menu, ConfigProvider, message} from 'antd';\nimport {\n    HomeOutlined,\n    UserOutlined,\n    LogoutOutlined\n} from '@ant-design/icons';\nimport Cookies from \"js-cookie\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport Sticky from 'react-stickynode';\nimport EventBus from \"../util/EventBus\";\n\nconst MyMediaMenu = () => {\n    const location = useLocation();\n    const history = useHistory();\n    const curPath = location.pathname.slice(1);\n\n    message.config({\n        rtl: false,\n    });\n\n    const onSelect = async (info) => {\n        if (curPath !== info.key) {\n            if (info.key === \"logout\") {\n                await fetch(\"http://localhost:4000/logout\", {\n                    method: \"PUT\",\n                    credentials: \"include\",\n                });\n                Cookies.remove(\"isLoggedIn\");\n                history.push({\n                    pathname: \"/landing\",\n                });\n                EventBus.dispatchEvent(\"clear_all_states\");\n            } else if (info.key === \"profile\") {\n                history.push({\n                    pathname: \"/profile\",\n                });\n            } else {\n                history.push({\n                    pathname: \"/home\",\n                })\n            }\n        }\n    }\n\n    return (\n        <Sticky innerZ=\"1\">\n            <ConfigProvider direction=\"rtl\">\n                <Menu\n                    theme=\"dark\"\n                    mode=\"horizontal\"\n                    onSelect={onSelect}\n                    selectedKeys={[curPath]}>\n                    <Menu.Item key=\"logout\">\n                        <LogoutOutlined/>Log Out\n                    </Menu.Item>\n                    <Menu.Item key=\"profile\">\n                        <UserOutlined/>Profile\n                    </Menu.Item>\n                    <Menu.Item key=\"home\">\n                        <HomeOutlined/>Home\n                    </Menu.Item>\n                </Menu>\n            </ConfigProvider>\n        </Sticky>\n    )\n}\n\nexport default MyMediaMenu;\n"]},"metadata":{},"sourceType":"module"}
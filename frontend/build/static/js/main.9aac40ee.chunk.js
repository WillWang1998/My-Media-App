(this["webpackJsonpmy-media-app"]=this["webpackJsonpmy-media-app"]||[]).push([[0],{170:function(e,t,n){},275:function(e,t,n){},407:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(36),s=n.n(c),i=n(114),o=n(26),u=(n(275),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,429)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))}),l=n(14),d=n(264),j=n(414),b=(n(170),n(28)),p=n(8),f=n.n(p),h=n(21),m=n(415),O=n(417),x=n(421),y=n(55),w={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},g={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},v=n(422),k=n(116),T=n(59),S=n.n(T),E=function(){return console.log("document.cookie",document.cookie),console.log('Cookies.get("isLoggedIn")',S.a.get("isLoggedIn")),!!S.a.get("isLoggedIn")},P=function(e){var t=new Date(Date.now()),n=t.getFullYear(),r=t.getMonth(),a=t.getDate();if(e){var c=e.year(),s=e.month(),i=e.date();return n-c<18||n-c===18&&r<s||n-c===18&&r===s&&a<i}return!1},I=function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="image"===t.type.split("/")[0]){e.next=4;break}return e.next=4,d.b.error("You can only upload image!",1);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=S.a.get("backendMessage"))&&("error"===(n=t.split("#"))[0]?d.b.error(n[1],1):"success"===n[0]?d.b.success(n[1],1):"info"===n[0]?d.b.info(n[1],1):"warning"===n[0]?d.b.warning(n[1],1):"loading"===n[0]&&d.b.loading(n[1],1),S.a.remove("backendMessage"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e,t){if(e&&t){var n,r=new Set,a=Object(k.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;r.add(c)}}catch(u){a.e(u)}finally{a.f()}var s,i=Object(k.a)(t);try{for(i.s();!(s=i.n()).done;){var o=s.value;if(!r.has(o))return!1;r.delete(o)}}catch(u){i.e(u)}finally{i.f()}return 0===r.size}return!e&&!t},N=n(6),U=function(){d.b.config({rtl:!1});var e=Object(o.g)(),t=function(){var t=Object(h.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,password:n.password})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(){e.push({pathname:"/home"}),d.b.config({rtl:!1}),d.b.success("Login Successfully!")})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsxs)(m.a,Object(b.a)(Object(b.a)({},w),{},{name:"logIn",autoComplete:"off",layout:"horizontal",onFinish:t,children:[Object(N.jsx)(m.a.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please input your username!"}],children:Object(N.jsx)(O.a,{})}),Object(N.jsx)(m.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],children:Object(N.jsx)(O.a.Password,{})}),Object(N.jsx)(m.a.Item,Object(b.a)(Object(b.a)({},g),{},{children:Object(N.jsxs)(x.b,{size:8,children:[Object(N.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Log in"}),Object(N.jsxs)(y.a,{type:"default",htmlType:"button",onClick:function(){window.location.href="https://comp531-rw48-mymedia-backend.herokuapp.com/auth/google"},children:["Log in with ",Object(N.jsx)(v.a,{})]})]})}))]}))},z=n(411),F=n(253),_=n(254),D=function(){function e(){Object(F.a)(this,e),this.bus=document.createElement("fakeElement")}return Object(_.a)(e,[{key:"addEventListener",value:function(e,t){this.bus.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.bus.removeEventListener(e,t)}},{key:"dispatchEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.bus.dispatchEvent(new CustomEvent(e,{detail:t}))}}]),e}(),A=new D,G=function(){d.b.config({rtl:!1});var e=m.a.useForm(),t=Object(l.a)(e,1)[0],n=Object(o.g)(),a=Object(r.useState)(""),c=Object(l.a)(a,2),s=c[0],i=c[1],u=Object(r.useState)(""),j=Object(l.a)(u,2),p=j[0],v=j[1],k=Object(r.useState)(""),T=Object(l.a)(k,2),E=T[0],I=T[1],C=function(){i(S.a.get("usernameForGoogle")),v(S.a.get("displayedNameForGoogle")),I(S.a.get("emailForGoogle"))};Object(r.useEffect)((function(){t.setFieldsValue({username:s,displayedName:p,email:E})}),[s,p,E]),Object(r.useEffect)(C,[]),A.addEventListener("clear_all_states",(function(){i(""),v(""),I("")})),A.addEventListener("reload_all",C);var U=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/register",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,email:t.email,phone:t.phone,dob:t.dob.toDate(),zipcode:t.zipcode,displayedName:t.displayedName,password:t.password})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(){d.b.success("Register successfully!"),n.push({pathname:"/home"})})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(m.a,Object(b.a)(Object(b.a)({},w),{},{name:"register",layout:"horizontal",autoComplete:"off",onFinish:U,form:t,children:[Object(N.jsx)(m.a.Item,{name:"username",label:"Username",rules:[{pattern:/^[a-zA-Z][a-zA-Z0-9]*$/,message:"Your account name can contain lowercase and uppercase Latin letter and number. The first letter cannot be a number."},{required:!0,message:"Please input your username!"}],children:Object(N.jsx)(O.a,{})}),Object(N.jsx)(m.a.Item,{name:"displayedName",label:"Displayed Name",rules:[{pattern:/^[a-zA-Z][a-zA-Z0-9]*$/,message:"Your account name can contain lowercase and uppercase Latin letter and number. The first letter cannot be a number."}],children:Object(N.jsx)(O.a,{})}),Object(N.jsx)(m.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"Please input your valid E-mail like a@b.co!"},{required:!0,message:"Please input your E-mail!"}],children:Object(N.jsx)(O.a,{placeholder:"a@b.co"})}),Object(N.jsx)(m.a.Item,{name:"phone",label:"Phone Number",rules:[{pattern:/^[0-9]{10}$/,message:"Please input your phone number like 1231231234!"},{required:!0,message:"Please input your phone number!"}],children:Object(N.jsx)(O.a,{placeholder:"1231231234"})}),Object(N.jsx)(m.a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!0,message:"Please input your date of birth!"}],extra:"Only individuals 18 years of age or older on the day of registration are allowed to register.",children:Object(N.jsx)(z.a,{format:"MM/DD/YYYY",style:{width:"100%"},disabledDate:P})}),Object(N.jsx)(m.a.Item,{name:"zipcode",label:"Zipcode",rules:[{pattern:/^[0-9]{5}$/,message:"Please input your phone zipcode like 12345!"},{required:!0,message:"Please input your phone zipcode!"}],children:Object(N.jsx)(O.a,{placeholder:"12345"})}),Object(N.jsx)(m.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],children:Object(N.jsx)(O.a.Password,{visibilityToggle:!1})}),Object(N.jsx)(m.a.Item,{name:"passwordConfirmation",label:"Confirmation",dependencies:["password"],rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("The two passwords you entered do not match!")):Promise.resolve()}}}],children:Object(N.jsx)(O.a.Password,{visibilityToggle:!1})}),Object(N.jsx)(m.a.Item,Object(b.a)(Object(b.a)({},g),{},{children:Object(N.jsxs)(x.b,{size:8,children:[Object(N.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Register"}),Object(N.jsx)(y.a,{htmlType:"reset",children:"Reset"})]})}))]}))},q=function(){d.b.config({rtl:!1});var e=Object(r.useState)("login"),t=Object(l.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)(L,[]);var c={login:Object(N.jsx)(U,{}),register:Object(N.jsx)(G,{})};return Object(N.jsx)(j.a,{style:{width:"50%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},bordered:!0,tabList:[{key:"login",tab:"Log In"},{key:"register",tab:"Register"}],activeTabKey:n,onTabChange:function(e){!function(e){a(e)}(e)},children:c[n]})},J=n(106),Y=n(63),M=n(409),B=n(71),Z=n.n(B),R=n(18),V=n(418),$=n(423),H=n(424),K=n(425),W=n(262),Q=function(){var e=Object(o.h)(),t=Object(o.g)(),n=e.pathname.slice(1);d.b.config({rtl:!1});var r=function(){var e=Object(h.a)(f.a.mark((function e(r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===r.key){e.next=10;break}if("logout"!==r.key){e.next=9;break}return e.next=4,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/logout",{method:"PUT",credentials:"include"});case 4:S.a.remove("isLoggedIn"),t.push({pathname:"/landing"}),A.dispatchEvent("clear_all_states"),e.next=10;break;case 9:"profile"===r.key?t.push({pathname:"/profile"}):t.push({pathname:"/home"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(W.a,{innerZ:"1",children:Object(N.jsx)(R.a,{direction:"rtl",children:Object(N.jsxs)(V.a,{theme:"dark",mode:"horizontal",onSelect:r,selectedKeys:[n],children:[Object(N.jsxs)(V.a.Item,{children:[Object(N.jsx)($.a,{}),"Log Out"]},"logout"),Object(N.jsxs)(V.a.Item,{children:[Object(N.jsx)(H.a,{}),"Profile"]},"profile"),Object(N.jsxs)(V.a.Item,{children:[Object(N.jsx)(K.a,{}),"Home"]},"home")]})})})},X=n(56),ee=n(269),te=n(412),ne=function(){d.b.config({rtl:!1});var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(!1),j=Object(l.a)(u,2),b=j[0],p=j[1],m=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/avatar",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){o(e.avatar)})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return m()}),[]),A.addEventListener("reload_avatar_uploader",m);var O=Object(N.jsxs)("div",{children:[n?Object(N.jsx)(X.a,{}):Object(N.jsx)(ee.a,{}),Object(N.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),w=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=3;break}return e.next=3,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/avatar",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:i})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(){d.b.success("Update successfully!",1),A.dispatchEvent("reload_min_profile"),A.dispatchEvent("reload_articles")})).catch((function(e){return d.b.error(e,1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)(J.a,{justify:"center",children:Object(N.jsxs)(x.b,{align:"center",direction:"vertical",children:[Object(N.jsx)(te.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"https://comp531-rw48-mymedia-backend.herokuapp.com/upload/avatar",withCredentials:!0,beforeUpload:I,onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(o(e.file.response.url),a(!1),p(!0)):a(!0)},children:i?Object(N.jsx)("img",{src:i,alt:"avatar",style:{width:"100%"}}):O}),Object(N.jsx)(y.a,{type:"primary",onClick:w,children:"Click the avatar to upload a new one, and then click here to submit the update."})]})})},re=function(){d.b.config({rtl:!1});var e=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/password",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:t.newPassword,oldPassword:t.curPassword})}).then((function(e){if(e.ok)return L(),e.json();throw 401===e.status?"The old password is wrong!":e.statusText})).then((function(){d.b.success("Update successfully!",1)})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(m.a,Object(b.a)(Object(b.a)({},w),{},{name:"updatePassword",autoComplete:"off",onFinish:e,children:[Object(N.jsx)(m.a.Item,{name:"curPassword",label:"Current Password",rules:[{required:!0,message:"Please input your current password!"}],children:Object(N.jsx)(O.a.Password,{visibilityToggle:!1})}),Object(N.jsx)(m.a.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please input your new password!"}],children:Object(N.jsx)(O.a.Password,{visibilityToggle:!1})}),Object(N.jsx)(m.a.Item,{name:"newPasswordConfirmation",label:"Confirmation",dependencies:["newPassword"],rules:[{required:!0,message:"Please confirm your new password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("newPassword")!==n?Promise.reject(new Error("The two passwords you entered do not match!")):Promise.resolve()}}}],children:Object(N.jsx)(O.a.Password,{visibilityToggle:!1})}),Object(N.jsx)(m.a.Item,Object(b.a)(Object(b.a)({},g),{},{children:Object(N.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Update"})}))]}))},ae=function(){d.b.config({rtl:!1});var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/google_email",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){a(e.google_email)})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return c()}),[]),A.addEventListener("reload_google_binding",c),A.addEventListener("reload_all",c),A.addEventListener("clear_all_states",(function(){a("")}));var s=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href="https://comp531-rw48-mymedia-backend.herokuapp.com/auth/google";case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsxs)(m.a,Object(b.a)(Object(b.a)({},w),{},{name:"userGoogleBinding",autoComplete:"off",onFinish:s,children:[Object(N.jsx)(m.a.Item,{name:"googleEmail",label:"Google Account",children:Object(N.jsx)("span",{className:"ant-form-text",children:n||"You have not linked your Google account."})}),Object(N.jsx)(m.a.Item,Object(b.a)(Object(b.a)({},g),{},{children:Object(N.jsxs)(y.a,{type:"primary",htmlType:"submit",children:["Link your account with ",Object(N.jsx)(v.a,{})]})}))]}))},ce=function(){d.b.config({rtl:!1});var e=m.a.useForm(),t=Object(l.a)(e,1)[0],n=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/profile",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){t.setFieldsValue({username:e.username,displayedName:e.displayedName,email:e.email,phone:e.phone,dob:Z()(e.dob),zipcode:e.zipcode,headline:e.headline})})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return n()}),[]);var a=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/profile",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayed_name:t.displayed_name,phone:t.phone,email:t.email,zipcode:t.zipcode,headline:t.headline,dob:t.dob})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(){A.dispatchEvent("reload_min_profile"),A.dispatchEvent("reload_articles"),d.b.success("Update successfully!")})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Q,{}),Object(N.jsxs)(J.a,{gutter:{xs:0,sm:0,md:0,lg:0,xl:0},style:{padding:"46px 0"},children:[Object(N.jsx)(Y.a,{className:"gutter-row",xs:0,sm:0,md:0,lg:6,xl:6}),Object(N.jsx)(Y.a,{className:"gutter-row",xs:24,sm:24,md:24,lg:12,xl:12,children:Object(N.jsxs)(j.a,{children:[Object(N.jsx)(M.a,{orientation:"left",children:"Avatar"}),Object(N.jsx)(ne,{}),Object(N.jsx)(M.a,{orientation:"left",children:"Information"}),Object(N.jsxs)(m.a,Object(b.a)(Object(b.a)({},w),{},{form:t,name:"updateInformation",autoComplete:"off",onFinish:a,children:[Object(N.jsx)(m.a.Item,{name:"username",label:"Username",children:Object(N.jsx)("span",{className:"ant-form-text"})}),Object(N.jsx)(m.a.Item,{name:"displayedName",label:"Displayed Name",rules:[{pattern:/^[a-zA-Z][a-zA-Z0-9]*$/,message:"Your account name can contain lowercase and uppercase Latin letter and number. The first letter cannot be a number."}],children:Object(N.jsx)(O.a,{})}),Object(N.jsx)(m.a.Item,{name:"headline",label:"Headline",children:Object(N.jsx)(O.a.TextArea,{rows:4})}),Object(N.jsx)(m.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"Please input your valid E-mail like a@b.co!"},{required:!0,message:"Please input your E-mail!"}],children:Object(N.jsx)(O.a,{})}),Object(N.jsx)(m.a.Item,{name:"phone",label:"Phone Number",rules:[{pattern:/^[0-9]{10}$/,message:"Please input your phone number like 1231231234!"},{required:!0,message:"Please input your phone number!"}],children:Object(N.jsx)(O.a,{})}),Object(N.jsx)(m.a.Item,{name:"dob",label:"Date of Birth",rules:[{required:!0,message:"Please input your date of birth!"}],extra:"Only individuals 18 years of age or older on the day of registration are allowed to register.",children:Object(N.jsx)(z.a,{format:"MM/DD/YYYY",style:{width:"100%"},disabledDate:P})}),Object(N.jsx)(m.a.Item,{name:"zipcode",label:"Zipcode",rules:[{pattern:/^[0-9]{5}$/,message:"Please input your phone zipcode like 12345!"},{required:!0,message:"Please input your phone zipcode!"}],children:Object(N.jsx)(O.a,{})}),Object(N.jsx)(m.a.Item,Object(b.a)(Object(b.a)({},g),{},{children:Object(N.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Update"})}))]})),Object(N.jsx)(M.a,{orientation:"left",children:"Linking your Google Account"}),Object(N.jsx)(ae,{}),Object(N.jsx)(M.a,{orientation:"left",children:"Password"}),Object(N.jsx)(re,{})]})}),Object(N.jsx)(Y.a,{className:"gutter-row",xs:0,sm:0,md:0,lg:6,xl:6})]})]})},se=n(413),ie=n(420),oe=function(e){d.b.config({rtl:!1});var t=Object(r.useState)(e.username),n=Object(l.a)(t,2),a=n[0],c=(n[1],Object(r.useState)("")),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),j=Object(l.a)(u,2),b=j[0],p=j[1],m=Object(r.useState)(""),O=Object(l.a)(m,2),x=O[0],w=O[1],g=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/profile/"+a,{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){o(e.avatar),p(e.displayedName),w(e.headline)})).catch((function(e){return d.b.error(e,1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return g()}),[]);var v=function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.action(a)();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(N.jsx)(se.b.Item,{actions:[Object(N.jsx)(y.a,{type:"text",onClick:v,children:e.actionSymbol})],children:Object(N.jsx)(se.b.Item.Meta,{avatar:Object(N.jsx)(ie.a,{src:i}),title:b,description:x})})},ue=n(426),le=n(161),de=function(){d.b.config({rtl:!1});var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(!1),b=Object(l.a)(u,2),p=b[0],m=b[1],x=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/following",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){a((function(t){return e.followings}))})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return x()}),[]);var y=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=5;break}m(!1),o([]),e.next=8;break;case 5:return m(!0),e.next=8,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/following/search",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyWord:t})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){o((function(t){return e.searchResult}))})).catch((function(e){return d.b.error(e,1)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){return Object(N.jsx)(se.b,{dataSource:e.userList,renderItem:function(t){return Object(N.jsx)(oe,{username:t,action:e.action,actionSymbol:e.symbol})},pagination:{position:"bottom",pageSize:5}})};return Object(N.jsxs)(j.a,{bordered:!0,children:[Object(N.jsx)(M.a,{orientation:"left",children:"My followings"}),Object(N.jsx)(O.a.Search,{allowClear:!0,enterButton:"Search",size:"large",onSearch:y}),Object(N.jsx)("div",{hidden:!p,children:Object(N.jsx)(j.a,{bordered:!0,children:Object(N.jsx)(w,{userList:i,symbol:Object(N.jsx)(ue.a,{}),action:function(e){return Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/following/"+e,{method:"PUT",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(t){d.b.success("Added a new following user"),a((function(e){return t.followings})),o((function(t){return t.filter((function(t){return t!==e}))})),A.dispatchEvent("reload_articles")})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return t.stop()}}),t)})))}})})}),Object(N.jsx)(w,{userList:n,symbol:Object(N.jsx)(le.a,{}),action:function(e){return Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/following/"+e,{method:"DELETE",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(){d.b.success("Delete a followed user"),a((function(t){return t.filter((function(t){return t!==e}))})),A.dispatchEvent("reload_articles")})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return t.stop()}}),t)})))}})]})},je=n(165),be=n(427),pe=function(){d.b.config({rtl:!1});var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),b=Object(l.a)(u,2),p=b[0],m=b[1],w=Object(r.useState)(""),g=Object(l.a)(w,2),v=g[0],k=g[1],T=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/profile",{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){o(e.headline),m(e.avatar),k(e.displayedName)})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return T()}),[]);var S=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return a(!1),e.next=4,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/headline",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({headline:i})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(){return A.dispatchEvent("reload_profile")})).catch((function(e){return d.b.error(e,1)}));case 4:e.next=7;break;case 6:a(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(j.a,{bordered:!0,children:[Object(N.jsx)(M.a,{orientation:"left",children:"Me"}),Object(N.jsx)(j.a.Meta,{avatar:Object(N.jsx)(ie.a,{src:p}),title:v,description:Object(N.jsxs)(x.b,{size:0,children:[Object(N.jsxs)(y.a,{type:"text",onClick:S,children:[" ",n?Object(N.jsx)(je.a,{}):Object(N.jsx)(be.a,{})]})," ",n?Object(N.jsx)(O.a,{value:i,onChange:function(e){o(e.target.value)}}):Object(N.jsx)("span",{children:i})]})})]})},fe=n(265),he=n(428),me=n(270),Oe=n(419),xe=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))},ye=function(e){return e?e.map((function(e){var t=e.split("/").slice(-1)[0];return{uid:t.split(".").slice(0,-1).join(""),name:t,status:"done",url:e}})):[]},we=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(r.useState)(""),j=Object(l.a)(d,2),b=j[0],p=j[1],m=Object(r.useState)(ye(e.imageUrlsList)),O=Object(l.a)(m,2),x=O[0],y=O[1];Object(r.useEffect)((function(){y((function(t){return ye(e.imageUrlsList)}))}),[e]);var w=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,xe(t.originFileObj);case 3:t.preview=e.sent;case 4:u(t.url||t.preview),c(!0),p(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=Object(N.jsxs)("div",{children:[Object(N.jsx)(ee.a,{}),Object(N.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(te.a,{name:"image",action:"https://comp531-rw48-mymedia-backend.herokuapp.com/upload/image",withCredentials:!0,listType:"picture-card",fileList:x,onPreview:w,onChange:function(t){var n=t.fileList;y(n);var r=[];if(n.forEach((function(e){return r.push(e.status)})),r.every((function(e){return"done"===e}))){var a,c=[],s=Object(k.a)(n);try{for(s.s();!(a=s.n()).done;){var i=a.value;c.push(i.url||i.response.url)}}catch(o){s.e(o)}finally{s.f()}e.action((function(e){return c}))}},children:x.length>=8?null:g}),Object(N.jsx)(Oe.a,{visible:a,title:b,footer:null,onCancel:function(){c(!1)},children:Object(N.jsx)("img",{alt:"example",style:{width:"100%"},src:o})})]})},ge=function(e,t){return C(e.imageUrlsList,t.imageUrlsList)},ve=Object(r.memo)(we,ge),ke=function(e){d.b.config({rtl:!1});var t=m.a.useForm(),n=Object(l.a)(t,1)[0],a=Object(r.useState)(e.imageUrlsList),c=Object(l.a)(a,2),s=c[0],i=c[1];Object(r.useEffect)((function(){n.setFieldsValue({title:e.title,text:e.text}),i((function(t){return e.imageUrlsList}))}),[n,e]);var o=function(){var t=Object(h.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return t.next=3,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/article/"+e.id,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n.title,text:n.text,images:s})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(t){d.b.success("Edit Successfully"),e.action({id:t._id,title:t.title,text:t.text,timestamp:t.timestamp,images:t.images})})).catch((function(e){return d.b.error(e,1)}));case 3:t.next=7;break;case 5:return t.next=7,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/article",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n.title,text:n.text,images:s})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(t){d.b.success("Submit Successfully",1),e.action(t._id)})).catch((function(e){return d.b.error(e,1)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsxs)(j.a,{bordered:!0,children:[Object(N.jsx)(M.a,{orientation:"left",children:e.id?"Edit this article":"Add new article"}),Object(N.jsxs)(m.a,{onFinish:o,form:n,children:[Object(N.jsx)(m.a.Item,{name:"title",children:Object(N.jsx)(O.a,{})}),Object(N.jsx)(m.a.Item,{name:"text",children:Object(N.jsx)(O.a.TextArea,{})}),Object(N.jsx)(m.a.Item,{children:Object(N.jsx)(ve,{imageUrlsList:s,action:i})}),Object(N.jsxs)(m.a.Item,{children:[Object(N.jsx)(y.a,{style:{width:"50%"},htmlType:"submit",type:"primary",children:"Submit"}),Object(N.jsx)(y.a,{style:{width:"50%"},htmlType:"reset",type:"default",children:"Clear"})]})]})]})},Te=function(e,t){return e.id===t.id&&e.title===t.title&&e.text===t.text&&C(e.imageUrlsList,t.imageUrlsList)},Se=Object(r.memo)(ke,Te),Ee=n(410),Pe=function(e){d.b.config({rtl:!1});var t=Object(r.useState)(!0),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(e.id),i=Object(l.a)(s,2),o=i[0],u=(i[1],Object(r.useState)("")),j=Object(l.a)(u,2),b=j[0],p=j[1],m=Object(r.useState)(""),x=Object(l.a)(m,2),w=x[0],g=x[1],v=Object(r.useState)(""),k=Object(l.a)(v,2),T=k[0],S=k[1],E=Object(r.useState)(""),P=Object(l.a)(E,2),I=P[0],C=P[1],U=Object(r.useState)(""),z=Object(l.a)(U,2),F=z[0],_=z[1],D=Object(r.useState)(0),A=Object(l.a)(D,2),G=A[0],q=A[1],J=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/comment/"+o,{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then(function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(t.author),p(t.username),_(t.text),q(t.timestamp),e.next=6,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/profile/"+t.author,{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){S(e.displayedName),C(e.avatar)})).catch((function(e){return d.b.error(e,1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/comment/"+o,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleId:e.articleId})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(){e.deleteAction(e.id),d.b.success("Delete successfully!")})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return d.b.error("Please input your comment!",1),e.abrupt("return");case 3:return e.next=5,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/comment/"+o,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){_(e.text),d.b.success("Update successfully!")})).catch((function(e){return d.b.error(e,1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return J()}),[]),Object(N.jsxs)("li",{children:[Object(N.jsx)(Ee.a,{author:T,avatar:I,content:F,actions:b===w?[Object(N.jsxs)(y.a,{type:"link",onClick:function(){return c(!a)},children:[Object(N.jsx)(be.a,{}),"Edit"]}),Object(N.jsxs)(y.a,{type:"link",onClick:Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,Y();case 3:case"end":return e.stop()}}),e)}))),children:[Object(N.jsx)(me.a,{}),"Delete"]})]:[],datetime:new Date(G).toLocaleString()}),Object(N.jsx)("div",{hidden:a,children:Object(N.jsx)(O.a.Search,{allowClear:!0,onSearch:M,defaultValue:F,enterButton:"Comment"})})]})},Ie=function(e){d.b.config({rtl:!1});var t=Object(r.useRef)(),n=Object(r.useState)(e.commentIdList),a=Object(l.a)(n,2),c=a[0],s=a[1];Object(r.useEffect)((function(){s((function(t){return e.commentIdList.reverse()}))}),[e]);var i=function(){var n=Object(h.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r){n.next=3;break}return d.b.error("Please input your comment!",1),n.abrupt("return");case 3:return n.next=5,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/comment",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleID:e.articleId,text:r})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){s((function(t){return e.comments.reverse()})),t.current.setValue(""),d.b.success("Comment Successfully!",1)})).catch((function(e){return d.b.error(e,1)}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),o=function(e){s((function(t){return t.filter((function(t){return t!==e}))}))},u=function(t){return Object(N.jsx)(se.b,{header:"".concat(t.commentIdList?t.commentIdList.length:0," replies"),itemLayout:"horizontal",dataSource:t.commentIdList,renderItem:function(t){return Object(N.jsx)(Pe,{articleId:e.articleId,id:t,deleteAction:o})}})};return Object(N.jsxs)(j.a,{children:[Object(N.jsx)(u,{commentIdList:c}),Object(N.jsx)(O.a.Search,{allowClear:!0,onSearch:i,ref:t,enterButton:"Comment"})]})},Le=n(416),Ce=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Le.a,{preview:{visible:!1},src:e.images[0],onClick:function(){return c(!0)},style:{width:"200px"}}),Object(N.jsx)("div",{style:{display:"none"},children:Object(N.jsx)(Le.a.PreviewGroup,{preview:{visible:a,onVisibleChange:function(e){return c(e)}},children:e.images.map((function(e){return Object(N.jsx)(Le.a,{src:e})}))})})]})},Ne=function(e){d.b.config({rtl:!1});var t=Object(r.useState)(e.id),n=Object(l.a)(t,2),a=n[0],c=(n[1],Object(r.useState)("")),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),b=Object(l.a)(u,2),p=b[0],m=b[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),w=x[0],g=x[1],v=Object(r.useState)(!0),k=Object(l.a)(v,2),T=k[0],S=k[1],E=Object(r.useState)(!0),P=Object(l.a)(E,2),I=P[0],C=P[1],U=Object(r.useState)(""),z=Object(l.a)(U,2),F=z[0],_=z[1],D=Object(r.useState)(""),A=Object(l.a)(D,2),G=A[0],q=A[1],J=Object(r.useState)(""),Y=Object(l.a)(J,2),M=Y[0],B=Y[1],Z=Object(r.useState)([]),R=Object(l.a)(Z,2),V=R[0],$=R[1],H=Object(r.useState)([]),K=Object(l.a)(H,2),W=K[0],Q=K[1];Object(r.useEffect)((function(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/article/"+a,{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then(function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t.author),_(t.title),q(t.text),B(new Date(t.timestamp).toLocaleString()),$((function(e){return t.imageUrlList})),Q((function(e){return t.commentIdList})),e.next=8,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/profile/"+t.author,{method:"GET",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){m(e.displayedName),g(e.avatar)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[e.id]);var X=function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/article/"+a,{method:"DELETE",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(){e.deleteAction(e.id),d.b.success("Delete successfully!")})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(N.jsxs)("div",{children:[Object(N.jsxs)(se.b.Item,{actions:e.username===i?[Object(N.jsxs)(y.a,{type:"link",onClick:function(){return S(!T)},children:[Object(N.jsx)(he.a,{}),"Comment"]}),Object(N.jsxs)(y.a,{type:"link",onClick:function(){return C(!I)},children:[Object(N.jsx)(be.a,{}),"Edit"]}),Object(N.jsxs)(y.a,{type:"link",onClick:Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),C(!0),e.next=4,X();case 4:case"end":return e.stop()}}),e)}))),children:[Object(N.jsx)(me.a,{}),"Delete"]})]:[Object(N.jsxs)(y.a,{type:"link",onClick:function(){return S(!T)},children:[Object(N.jsx)(he.a,{}),"Comment"]})],extra:V&&0!==V.length?Object(N.jsx)(Ce,{images:V}):Object(N.jsx)(N.Fragment,{}),children:[Object(N.jsx)(se.b.Item.Meta,{avatar:Object(N.jsx)(ie.a,{src:w}),title:F,description:Object(N.jsxs)("div",{children:[Object(N.jsxs)("span",{children:[p,","]}),Object(N.jsx)("span",{children:new Date(M).toLocaleString()})]})}),G]},e.title),Object(N.jsx)("div",{hidden:I,children:Object(N.jsx)(j.a,{border:"true",children:Object(N.jsx)(Se,{action:function(e){_(e.title),q(e.text),B(e.timestamp),$((function(t){return e.images})),C(!0)},id:e.id,title:F,text:G,imageUrlsList:V})})}),Object(N.jsx)("div",{hidden:T,children:Object(N.jsx)(j.a,{border:"true",children:Object(N.jsx)(Ie,{commentIdList:W,articleId:a})})})]})},Ue=function(){d.b.config({rtl:!1});var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(l.a)(c,2),i=s[0],o=s[1],u=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/search/article",{method:"POST",credentials:"include"}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){o(e.username),a((function(t){return e.ids}))})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return u()}),[]),A.addEventListener("reload_articles",u);var b=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://comp531-rw48-mymedia-backend.herokuapp.com/search/article",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyWord:t})}).then((function(e){if(e.ok)return L(),e.json();throw e.statusText})).then((function(e){a((function(t){return e.ids}))})).catch((function(e){return d.b.error(e,1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){a((function(t){return t.filter((function(t){return t!==e}))}))},m=function(e){return Object(N.jsx)(se.b,{itemLayout:"vertical",size:"large",dataSource:e.selectedArticleIds,renderItem:function(e){return Object(N.jsx)(Ne,{id:e,username:i,deleteAction:p})},pagination:{position:"top",pageSize:5}})};return Object(N.jsxs)(x.b,{direction:"vertical",style:{width:"100%"},children:[Object(N.jsx)(Se,{action:function(e){a((function(t){return[e].concat(Object(fe.a)(t))}))}}),Object(N.jsxs)(j.a,{bordered:!0,children:[Object(N.jsx)(O.a.Search,{allowClear:!0,enterButton:"Search",size:"large",onSearch:b}),Object(N.jsx)(M.a,{orientation:"left",children:"Posts"}),Object(N.jsx)(m,{selectedArticleIds:n})]})]})},ze=function(){d.b.config({rtl:!1});return Object(r.useEffect)(L,[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Q,{}),Object(N.jsxs)(J.a,{gutter:{xs:8,sm:16,md:24,lg:32},style:{padding:"46px 0"},children:[Object(N.jsx)(Y.a,{className:"gutter-row",xs:0,sm:0,md:3,lg:3,xl:3}),Object(N.jsx)(Y.a,{className:"gutter-row",xs:24,sm:24,md:6,lg:6,xl:6,children:Object(N.jsxs)(x.b,{direction:"vertical",style:{width:"100%"},children:[Object(N.jsx)(pe,{}),Object(N.jsx)(de,{})]})}),Object(N.jsx)(Y.a,{className:"gutter-row",xs:24,sm:24,md:12,lg:12,xl:12,children:Object(N.jsx)(Ue,{})}),Object(N.jsx)(Y.a,{className:"gutter-row",xs:0,sm:0,md:3,lg:3,xl:3})]})]})},Fe=function(){return d.b.config({rtl:!1}),Object(N.jsx)(j.a,{style:{width:"44%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},bordered:!0,children:Object(N.jsx)(G,{})})};s.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(i.a,{children:Object(N.jsxs)(o.d,{children:[Object(N.jsx)(o.b,{exact:!0,path:"/",render:function(){return E()?Object(N.jsx)(o.a,{to:"/home"}):Object(N.jsx)(o.a,{to:"/landing"})}}),Object(N.jsx)(o.b,{exact:!0,path:"/landing",render:function(){return E()?Object(N.jsx)(o.a,{to:"/home"}):Object(N.jsx)(q,{})}}),Object(N.jsx)(o.b,{exact:!0,path:"/home",render:function(){return E()?Object(N.jsx)(ze,{}):Object(N.jsx)(o.a,{to:"/landing"})}}),Object(N.jsx)(o.b,{exact:!0,path:"/profile",render:function(){return E()?Object(N.jsx)(ce,{}):Object(N.jsx)(o.a,{to:"/landing"})}}),Object(N.jsx)(o.b,{exact:!0,path:"/register_with_google",render:function(){return E()?Object(N.jsx)(o.a,{to:"/home"}):S.a.get("usernameForGoogle")?Object(N.jsx)(Fe,{}):Object(N.jsx)(o.a,{to:"/landing"})}})]})})}),document.getElementById("root")),u()}},[[407,1,2]]]);
//# sourceMappingURL=main.9aac40ee.chunk.js.map